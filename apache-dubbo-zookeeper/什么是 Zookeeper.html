<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>什么是 Zookeeper | 我的笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/notes/favicon.ico">
    <script data-ad-client="ca-pub-4147143076931995" async="true" src="/notes//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="记录Java的学习过程">
    
    <link rel="preload" href="/notes/assets/css/0.styles.db9e9bf4.css" as="style"><link rel="preload" href="/notes/assets/js/app.4394edef.js" as="script"><link rel="preload" href="/notes/assets/js/3.499ba1d5.js" as="script"><link rel="preload" href="/notes/assets/js/30.27ec9a11.js" as="script"><link rel="prefetch" href="/notes/assets/js/1.38d69124.js"><link rel="prefetch" href="/notes/assets/js/10.a5dbd791.js"><link rel="prefetch" href="/notes/assets/js/100.855dee90.js"><link rel="prefetch" href="/notes/assets/js/101.5f61e033.js"><link rel="prefetch" href="/notes/assets/js/102.3469dfe6.js"><link rel="prefetch" href="/notes/assets/js/103.f97cd3c4.js"><link rel="prefetch" href="/notes/assets/js/104.d1be0323.js"><link rel="prefetch" href="/notes/assets/js/105.bff5ad21.js"><link rel="prefetch" href="/notes/assets/js/106.8bfda405.js"><link rel="prefetch" href="/notes/assets/js/107.fd4a3526.js"><link rel="prefetch" href="/notes/assets/js/108.ec803d12.js"><link rel="prefetch" href="/notes/assets/js/109.8bf97b71.js"><link rel="prefetch" href="/notes/assets/js/11.e807a7ed.js"><link rel="prefetch" href="/notes/assets/js/110.3cbf71f4.js"><link rel="prefetch" href="/notes/assets/js/111.d4476b7a.js"><link rel="prefetch" href="/notes/assets/js/112.3d5957bd.js"><link rel="prefetch" href="/notes/assets/js/113.f101f928.js"><link rel="prefetch" href="/notes/assets/js/114.b45be011.js"><link rel="prefetch" href="/notes/assets/js/115.36fae589.js"><link rel="prefetch" href="/notes/assets/js/116.9f5abe3a.js"><link rel="prefetch" href="/notes/assets/js/117.ea710cb4.js"><link rel="prefetch" href="/notes/assets/js/118.cc44a183.js"><link rel="prefetch" href="/notes/assets/js/119.58bcbadf.js"><link rel="prefetch" href="/notes/assets/js/12.b8e9ea0e.js"><link rel="prefetch" href="/notes/assets/js/120.38ae234a.js"><link rel="prefetch" href="/notes/assets/js/121.20e6693e.js"><link rel="prefetch" href="/notes/assets/js/122.9d14160c.js"><link rel="prefetch" href="/notes/assets/js/123.56e221ac.js"><link rel="prefetch" href="/notes/assets/js/124.80c6fac9.js"><link rel="prefetch" href="/notes/assets/js/125.b851edf2.js"><link rel="prefetch" href="/notes/assets/js/126.565b012b.js"><link rel="prefetch" href="/notes/assets/js/127.d7d6e0ea.js"><link rel="prefetch" href="/notes/assets/js/128.2242a066.js"><link rel="prefetch" href="/notes/assets/js/129.02e60c5d.js"><link rel="prefetch" href="/notes/assets/js/13.ee61224b.js"><link rel="prefetch" href="/notes/assets/js/130.869b1fef.js"><link rel="prefetch" href="/notes/assets/js/131.e7f3e93e.js"><link rel="prefetch" href="/notes/assets/js/132.29465758.js"><link rel="prefetch" href="/notes/assets/js/133.758d34b1.js"><link rel="prefetch" href="/notes/assets/js/134.b91b657f.js"><link rel="prefetch" href="/notes/assets/js/135.f22c78a9.js"><link rel="prefetch" href="/notes/assets/js/136.ff7a4dfb.js"><link rel="prefetch" href="/notes/assets/js/137.0217e3a6.js"><link rel="prefetch" href="/notes/assets/js/138.4530d752.js"><link rel="prefetch" href="/notes/assets/js/139.66f5ff99.js"><link rel="prefetch" href="/notes/assets/js/14.b0ee0bd3.js"><link rel="prefetch" href="/notes/assets/js/140.e98b7a29.js"><link rel="prefetch" href="/notes/assets/js/141.17370b53.js"><link rel="prefetch" href="/notes/assets/js/142.9171a17e.js"><link rel="prefetch" href="/notes/assets/js/143.123cb882.js"><link rel="prefetch" href="/notes/assets/js/144.a3ab3c1e.js"><link rel="prefetch" href="/notes/assets/js/145.df6095ce.js"><link rel="prefetch" href="/notes/assets/js/146.297a5691.js"><link rel="prefetch" href="/notes/assets/js/147.8b775c1d.js"><link rel="prefetch" href="/notes/assets/js/148.5d1953b6.js"><link rel="prefetch" href="/notes/assets/js/149.e86e91d0.js"><link rel="prefetch" href="/notes/assets/js/15.598de02e.js"><link rel="prefetch" href="/notes/assets/js/150.a98bca9c.js"><link rel="prefetch" href="/notes/assets/js/151.f29d3d49.js"><link rel="prefetch" href="/notes/assets/js/152.76982dca.js"><link rel="prefetch" href="/notes/assets/js/153.6cfba964.js"><link rel="prefetch" href="/notes/assets/js/154.cc02a668.js"><link rel="prefetch" href="/notes/assets/js/155.974eb41d.js"><link rel="prefetch" href="/notes/assets/js/156.ecf561d9.js"><link rel="prefetch" href="/notes/assets/js/157.79282e02.js"><link rel="prefetch" href="/notes/assets/js/158.bbd922f3.js"><link rel="prefetch" href="/notes/assets/js/159.89c0c986.js"><link rel="prefetch" href="/notes/assets/js/16.44d6776e.js"><link rel="prefetch" href="/notes/assets/js/160.baf9d921.js"><link rel="prefetch" href="/notes/assets/js/161.a9b8f635.js"><link rel="prefetch" href="/notes/assets/js/162.6d6a7ec5.js"><link rel="prefetch" href="/notes/assets/js/163.a3c7488c.js"><link rel="prefetch" href="/notes/assets/js/164.c9f0500c.js"><link rel="prefetch" href="/notes/assets/js/165.30411c9b.js"><link rel="prefetch" href="/notes/assets/js/166.bc3d5911.js"><link rel="prefetch" href="/notes/assets/js/167.c661fd7b.js"><link rel="prefetch" href="/notes/assets/js/168.cbc5ab9b.js"><link rel="prefetch" href="/notes/assets/js/169.5dee4e88.js"><link rel="prefetch" href="/notes/assets/js/17.d7b8971a.js"><link rel="prefetch" href="/notes/assets/js/170.9e2897f5.js"><link rel="prefetch" href="/notes/assets/js/171.057d9ad1.js"><link rel="prefetch" href="/notes/assets/js/172.fa910130.js"><link rel="prefetch" href="/notes/assets/js/173.4723064f.js"><link rel="prefetch" href="/notes/assets/js/174.8ad20ad0.js"><link rel="prefetch" href="/notes/assets/js/175.ad7ca5e6.js"><link rel="prefetch" href="/notes/assets/js/176.ddd3d12c.js"><link rel="prefetch" href="/notes/assets/js/177.5fb19a05.js"><link rel="prefetch" href="/notes/assets/js/178.8647fda3.js"><link rel="prefetch" href="/notes/assets/js/179.b08f05a2.js"><link rel="prefetch" href="/notes/assets/js/18.42070e39.js"><link rel="prefetch" href="/notes/assets/js/180.4013a5e3.js"><link rel="prefetch" href="/notes/assets/js/181.2ff5d065.js"><link rel="prefetch" href="/notes/assets/js/182.84cb537c.js"><link rel="prefetch" href="/notes/assets/js/183.f5eabd47.js"><link rel="prefetch" href="/notes/assets/js/184.a01b9e48.js"><link rel="prefetch" href="/notes/assets/js/185.e7d88f1a.js"><link rel="prefetch" href="/notes/assets/js/186.358a2348.js"><link rel="prefetch" href="/notes/assets/js/187.9c01f97b.js"><link rel="prefetch" href="/notes/assets/js/188.a26520e2.js"><link rel="prefetch" href="/notes/assets/js/189.e8101173.js"><link rel="prefetch" href="/notes/assets/js/19.deaea0cd.js"><link rel="prefetch" href="/notes/assets/js/190.4db66d1c.js"><link rel="prefetch" href="/notes/assets/js/191.c4fb68e3.js"><link rel="prefetch" href="/notes/assets/js/192.3898a6bb.js"><link rel="prefetch" href="/notes/assets/js/193.e1645fe5.js"><link rel="prefetch" href="/notes/assets/js/194.444e8222.js"><link rel="prefetch" href="/notes/assets/js/195.5a6c28d2.js"><link rel="prefetch" href="/notes/assets/js/196.70fb07df.js"><link rel="prefetch" href="/notes/assets/js/197.e0c5fd7e.js"><link rel="prefetch" href="/notes/assets/js/198.fff60e9b.js"><link rel="prefetch" href="/notes/assets/js/199.38151e80.js"><link rel="prefetch" href="/notes/assets/js/20.31d3a4b3.js"><link rel="prefetch" href="/notes/assets/js/200.746630e8.js"><link rel="prefetch" href="/notes/assets/js/201.c19c0234.js"><link rel="prefetch" href="/notes/assets/js/202.e3cbb9d0.js"><link rel="prefetch" href="/notes/assets/js/203.d433a129.js"><link rel="prefetch" href="/notes/assets/js/204.de75ac01.js"><link rel="prefetch" href="/notes/assets/js/205.55f064b3.js"><link rel="prefetch" href="/notes/assets/js/206.2e4c6536.js"><link rel="prefetch" href="/notes/assets/js/207.658b0485.js"><link rel="prefetch" href="/notes/assets/js/208.0414daa5.js"><link rel="prefetch" href="/notes/assets/js/209.a8c2b910.js"><link rel="prefetch" href="/notes/assets/js/21.998ed6e0.js"><link rel="prefetch" href="/notes/assets/js/210.aad4c8fc.js"><link rel="prefetch" href="/notes/assets/js/211.f116cd27.js"><link rel="prefetch" href="/notes/assets/js/212.f4628715.js"><link rel="prefetch" href="/notes/assets/js/213.ceadc213.js"><link rel="prefetch" href="/notes/assets/js/214.20425d7e.js"><link rel="prefetch" href="/notes/assets/js/215.ea509344.js"><link rel="prefetch" href="/notes/assets/js/216.a4ab1a13.js"><link rel="prefetch" href="/notes/assets/js/217.e7f07700.js"><link rel="prefetch" href="/notes/assets/js/218.d34a6368.js"><link rel="prefetch" href="/notes/assets/js/219.c6aa2c44.js"><link rel="prefetch" href="/notes/assets/js/22.0bde63c4.js"><link rel="prefetch" href="/notes/assets/js/220.a20be513.js"><link rel="prefetch" href="/notes/assets/js/221.7316596a.js"><link rel="prefetch" href="/notes/assets/js/222.841353ed.js"><link rel="prefetch" href="/notes/assets/js/223.e33bec57.js"><link rel="prefetch" href="/notes/assets/js/224.354d6301.js"><link rel="prefetch" href="/notes/assets/js/225.282386c1.js"><link rel="prefetch" href="/notes/assets/js/226.abb99fb7.js"><link rel="prefetch" href="/notes/assets/js/227.b2ab63ea.js"><link rel="prefetch" href="/notes/assets/js/228.df447bd0.js"><link rel="prefetch" href="/notes/assets/js/229.fd1b2705.js"><link rel="prefetch" href="/notes/assets/js/23.d600cd4a.js"><link rel="prefetch" href="/notes/assets/js/230.56479e93.js"><link rel="prefetch" href="/notes/assets/js/231.7fe06ae5.js"><link rel="prefetch" href="/notes/assets/js/232.40909175.js"><link rel="prefetch" href="/notes/assets/js/233.bba63cc0.js"><link rel="prefetch" href="/notes/assets/js/234.ca29b35e.js"><link rel="prefetch" href="/notes/assets/js/235.f8a823b0.js"><link rel="prefetch" href="/notes/assets/js/236.a2235fd6.js"><link rel="prefetch" href="/notes/assets/js/237.0a512d23.js"><link rel="prefetch" href="/notes/assets/js/238.74752a3f.js"><link rel="prefetch" href="/notes/assets/js/239.c2bca48c.js"><link rel="prefetch" href="/notes/assets/js/24.39be2e8d.js"><link rel="prefetch" href="/notes/assets/js/240.ced33249.js"><link rel="prefetch" href="/notes/assets/js/241.a18de0bf.js"><link rel="prefetch" href="/notes/assets/js/242.669b3661.js"><link rel="prefetch" href="/notes/assets/js/243.8d12af13.js"><link rel="prefetch" href="/notes/assets/js/244.94929fbd.js"><link rel="prefetch" href="/notes/assets/js/245.01f98b2d.js"><link rel="prefetch" href="/notes/assets/js/246.1c7cb7bc.js"><link rel="prefetch" href="/notes/assets/js/247.5d018884.js"><link rel="prefetch" href="/notes/assets/js/248.20cc0c3b.js"><link rel="prefetch" href="/notes/assets/js/249.a10fbf5a.js"><link rel="prefetch" href="/notes/assets/js/25.f7a1c429.js"><link rel="prefetch" href="/notes/assets/js/250.cea231a0.js"><link rel="prefetch" href="/notes/assets/js/251.52736b60.js"><link rel="prefetch" href="/notes/assets/js/252.60f6e80e.js"><link rel="prefetch" href="/notes/assets/js/253.e2ab134e.js"><link rel="prefetch" href="/notes/assets/js/254.d221539b.js"><link rel="prefetch" href="/notes/assets/js/255.9acb0f08.js"><link rel="prefetch" href="/notes/assets/js/256.22c747ac.js"><link rel="prefetch" href="/notes/assets/js/257.f836ea8d.js"><link rel="prefetch" href="/notes/assets/js/258.a11bcb0e.js"><link rel="prefetch" href="/notes/assets/js/259.08eb5bd9.js"><link rel="prefetch" href="/notes/assets/js/26.718316a9.js"><link rel="prefetch" href="/notes/assets/js/260.55db7d07.js"><link rel="prefetch" href="/notes/assets/js/261.a0f04612.js"><link rel="prefetch" href="/notes/assets/js/262.e507e349.js"><link rel="prefetch" href="/notes/assets/js/263.bc2798af.js"><link rel="prefetch" href="/notes/assets/js/264.aa2a7ed5.js"><link rel="prefetch" href="/notes/assets/js/265.b3125de8.js"><link rel="prefetch" href="/notes/assets/js/266.01bf6375.js"><link rel="prefetch" href="/notes/assets/js/267.ccea1a20.js"><link rel="prefetch" href="/notes/assets/js/268.be1e4e72.js"><link rel="prefetch" href="/notes/assets/js/269.dbd08cee.js"><link rel="prefetch" href="/notes/assets/js/27.94862e46.js"><link rel="prefetch" href="/notes/assets/js/270.1ca726b8.js"><link rel="prefetch" href="/notes/assets/js/271.f5474b97.js"><link rel="prefetch" href="/notes/assets/js/272.b0ef680f.js"><link rel="prefetch" href="/notes/assets/js/273.c4136437.js"><link rel="prefetch" href="/notes/assets/js/274.4e8bdfd6.js"><link rel="prefetch" href="/notes/assets/js/275.fb644fb5.js"><link rel="prefetch" href="/notes/assets/js/276.5cb09d9f.js"><link rel="prefetch" href="/notes/assets/js/277.57e58373.js"><link rel="prefetch" href="/notes/assets/js/278.43c33939.js"><link rel="prefetch" href="/notes/assets/js/279.914a110e.js"><link rel="prefetch" href="/notes/assets/js/28.a5e6fe66.js"><link rel="prefetch" href="/notes/assets/js/280.cf3b7a68.js"><link rel="prefetch" href="/notes/assets/js/281.de48ba8f.js"><link rel="prefetch" href="/notes/assets/js/282.c069db9c.js"><link rel="prefetch" href="/notes/assets/js/283.747f23a6.js"><link rel="prefetch" href="/notes/assets/js/284.d04f54b2.js"><link rel="prefetch" href="/notes/assets/js/285.39ac6b15.js"><link rel="prefetch" href="/notes/assets/js/286.43b88694.js"><link rel="prefetch" href="/notes/assets/js/287.2cafdc4d.js"><link rel="prefetch" href="/notes/assets/js/288.84d97b4e.js"><link rel="prefetch" href="/notes/assets/js/289.b2118bba.js"><link rel="prefetch" href="/notes/assets/js/29.ab3b6aaf.js"><link rel="prefetch" href="/notes/assets/js/290.16f2afe5.js"><link rel="prefetch" href="/notes/assets/js/291.bc6c61b0.js"><link rel="prefetch" href="/notes/assets/js/292.8bff7b6b.js"><link rel="prefetch" href="/notes/assets/js/293.a3a4b0f8.js"><link rel="prefetch" href="/notes/assets/js/294.0f2cb4da.js"><link rel="prefetch" href="/notes/assets/js/295.28aba777.js"><link rel="prefetch" href="/notes/assets/js/296.2371cb58.js"><link rel="prefetch" href="/notes/assets/js/297.61203718.js"><link rel="prefetch" href="/notes/assets/js/298.037c63f7.js"><link rel="prefetch" href="/notes/assets/js/299.b74b878c.js"><link rel="prefetch" href="/notes/assets/js/300.edf28f31.js"><link rel="prefetch" href="/notes/assets/js/301.b6986f4d.js"><link rel="prefetch" href="/notes/assets/js/302.48f59fa0.js"><link rel="prefetch" href="/notes/assets/js/303.c1e4d4ae.js"><link rel="prefetch" href="/notes/assets/js/304.b280da5f.js"><link rel="prefetch" href="/notes/assets/js/305.14e777bd.js"><link rel="prefetch" href="/notes/assets/js/306.3de8374a.js"><link rel="prefetch" href="/notes/assets/js/307.bb6b675d.js"><link rel="prefetch" href="/notes/assets/js/308.2dc4265f.js"><link rel="prefetch" href="/notes/assets/js/309.65b16b58.js"><link rel="prefetch" href="/notes/assets/js/31.20c8bfc3.js"><link rel="prefetch" href="/notes/assets/js/310.8e4c18ae.js"><link rel="prefetch" href="/notes/assets/js/311.c910a30b.js"><link rel="prefetch" href="/notes/assets/js/312.7036cc34.js"><link rel="prefetch" href="/notes/assets/js/313.103ece8b.js"><link rel="prefetch" href="/notes/assets/js/314.2e248349.js"><link rel="prefetch" href="/notes/assets/js/315.9affc380.js"><link rel="prefetch" href="/notes/assets/js/316.ebb4f037.js"><link rel="prefetch" href="/notes/assets/js/317.0dacd35e.js"><link rel="prefetch" href="/notes/assets/js/318.738240d2.js"><link rel="prefetch" href="/notes/assets/js/319.b54a8183.js"><link rel="prefetch" href="/notes/assets/js/32.2c249dba.js"><link rel="prefetch" href="/notes/assets/js/320.7262fc62.js"><link rel="prefetch" href="/notes/assets/js/321.b4d79334.js"><link rel="prefetch" href="/notes/assets/js/322.ad66b9bd.js"><link rel="prefetch" href="/notes/assets/js/323.a8dccd01.js"><link rel="prefetch" href="/notes/assets/js/324.d4051798.js"><link rel="prefetch" href="/notes/assets/js/325.c91a654f.js"><link rel="prefetch" href="/notes/assets/js/326.7ee08c62.js"><link rel="prefetch" href="/notes/assets/js/327.6215a570.js"><link rel="prefetch" href="/notes/assets/js/328.71120a1a.js"><link rel="prefetch" href="/notes/assets/js/329.22e47ea7.js"><link rel="prefetch" href="/notes/assets/js/33.e597a7df.js"><link rel="prefetch" href="/notes/assets/js/330.34079108.js"><link rel="prefetch" href="/notes/assets/js/331.d770f721.js"><link rel="prefetch" href="/notes/assets/js/332.aa85145a.js"><link rel="prefetch" href="/notes/assets/js/333.64e140e4.js"><link rel="prefetch" href="/notes/assets/js/334.cd240324.js"><link rel="prefetch" href="/notes/assets/js/335.cd547635.js"><link rel="prefetch" href="/notes/assets/js/336.91dab600.js"><link rel="prefetch" href="/notes/assets/js/337.2ec5cdc7.js"><link rel="prefetch" href="/notes/assets/js/338.59043c82.js"><link rel="prefetch" href="/notes/assets/js/339.8e5d1e06.js"><link rel="prefetch" href="/notes/assets/js/34.8d4b28aa.js"><link rel="prefetch" href="/notes/assets/js/340.9e2d2874.js"><link rel="prefetch" href="/notes/assets/js/341.61e6092a.js"><link rel="prefetch" href="/notes/assets/js/342.d0ee898b.js"><link rel="prefetch" href="/notes/assets/js/343.fb16ffba.js"><link rel="prefetch" href="/notes/assets/js/344.0bb46145.js"><link rel="prefetch" href="/notes/assets/js/345.ef6bfd94.js"><link rel="prefetch" href="/notes/assets/js/346.523ba3d0.js"><link rel="prefetch" href="/notes/assets/js/347.b7fd68da.js"><link rel="prefetch" href="/notes/assets/js/348.b6778cbf.js"><link rel="prefetch" href="/notes/assets/js/349.566ca9a1.js"><link rel="prefetch" href="/notes/assets/js/35.c2b72c34.js"><link rel="prefetch" href="/notes/assets/js/350.aa159fd9.js"><link rel="prefetch" href="/notes/assets/js/351.fe309038.js"><link rel="prefetch" href="/notes/assets/js/352.62097177.js"><link rel="prefetch" href="/notes/assets/js/353.8c8811bc.js"><link rel="prefetch" href="/notes/assets/js/354.d2ada007.js"><link rel="prefetch" href="/notes/assets/js/355.5d345cc6.js"><link rel="prefetch" href="/notes/assets/js/356.c6810cd7.js"><link rel="prefetch" href="/notes/assets/js/357.ac10961e.js"><link rel="prefetch" href="/notes/assets/js/358.0340e23d.js"><link rel="prefetch" href="/notes/assets/js/359.16bc2223.js"><link rel="prefetch" href="/notes/assets/js/36.57ca532c.js"><link rel="prefetch" href="/notes/assets/js/360.e45f7ea9.js"><link rel="prefetch" href="/notes/assets/js/361.a39d091e.js"><link rel="prefetch" href="/notes/assets/js/362.0283b5a9.js"><link rel="prefetch" href="/notes/assets/js/363.48fa48fe.js"><link rel="prefetch" href="/notes/assets/js/364.25a549cd.js"><link rel="prefetch" href="/notes/assets/js/365.2eddb807.js"><link rel="prefetch" href="/notes/assets/js/366.ef272f1a.js"><link rel="prefetch" href="/notes/assets/js/367.28e17043.js"><link rel="prefetch" href="/notes/assets/js/368.255a80fb.js"><link rel="prefetch" href="/notes/assets/js/369.ae66dd9f.js"><link rel="prefetch" href="/notes/assets/js/37.c545dd68.js"><link rel="prefetch" href="/notes/assets/js/370.88f9a32c.js"><link rel="prefetch" href="/notes/assets/js/371.7ffd8780.js"><link rel="prefetch" href="/notes/assets/js/372.605383d1.js"><link rel="prefetch" href="/notes/assets/js/373.c11f5dfe.js"><link rel="prefetch" href="/notes/assets/js/374.c00642a8.js"><link rel="prefetch" href="/notes/assets/js/375.0b004b06.js"><link rel="prefetch" href="/notes/assets/js/376.2769e761.js"><link rel="prefetch" href="/notes/assets/js/377.816e6da6.js"><link rel="prefetch" href="/notes/assets/js/378.cabaa608.js"><link rel="prefetch" href="/notes/assets/js/379.f3e43a5a.js"><link rel="prefetch" href="/notes/assets/js/38.3d798baf.js"><link rel="prefetch" href="/notes/assets/js/380.1ef68ac8.js"><link rel="prefetch" href="/notes/assets/js/381.f554891d.js"><link rel="prefetch" href="/notes/assets/js/382.4eeb9fb7.js"><link rel="prefetch" href="/notes/assets/js/383.de837b94.js"><link rel="prefetch" href="/notes/assets/js/384.085f9f09.js"><link rel="prefetch" href="/notes/assets/js/385.8fa51abb.js"><link rel="prefetch" href="/notes/assets/js/386.040eac11.js"><link rel="prefetch" href="/notes/assets/js/387.88990e8b.js"><link rel="prefetch" href="/notes/assets/js/388.1ea4a37c.js"><link rel="prefetch" href="/notes/assets/js/389.a323e4b9.js"><link rel="prefetch" href="/notes/assets/js/39.e9da77b7.js"><link rel="prefetch" href="/notes/assets/js/390.22026053.js"><link rel="prefetch" href="/notes/assets/js/391.9f02c56d.js"><link rel="prefetch" href="/notes/assets/js/392.d55d9034.js"><link rel="prefetch" href="/notes/assets/js/393.1cbbcf50.js"><link rel="prefetch" href="/notes/assets/js/394.55ea930c.js"><link rel="prefetch" href="/notes/assets/js/395.d0415c56.js"><link rel="prefetch" href="/notes/assets/js/396.a1f242c0.js"><link rel="prefetch" href="/notes/assets/js/397.ad062a1e.js"><link rel="prefetch" href="/notes/assets/js/398.401acbf5.js"><link rel="prefetch" href="/notes/assets/js/399.7fcb37f1.js"><link rel="prefetch" href="/notes/assets/js/4.0eddc376.js"><link rel="prefetch" href="/notes/assets/js/40.152fb70e.js"><link rel="prefetch" href="/notes/assets/js/400.7cad41d3.js"><link rel="prefetch" href="/notes/assets/js/401.bf6e604c.js"><link rel="prefetch" href="/notes/assets/js/402.5271fc7c.js"><link rel="prefetch" href="/notes/assets/js/403.a960210f.js"><link rel="prefetch" href="/notes/assets/js/404.220d9814.js"><link rel="prefetch" href="/notes/assets/js/405.fbeefca5.js"><link rel="prefetch" href="/notes/assets/js/406.1a7a3651.js"><link rel="prefetch" href="/notes/assets/js/407.92451b0d.js"><link rel="prefetch" href="/notes/assets/js/408.9081c518.js"><link rel="prefetch" href="/notes/assets/js/409.5b8705a8.js"><link rel="prefetch" href="/notes/assets/js/41.c973cd04.js"><link rel="prefetch" href="/notes/assets/js/410.2afd45ff.js"><link rel="prefetch" href="/notes/assets/js/411.30a6778b.js"><link rel="prefetch" href="/notes/assets/js/412.5b5fbb7a.js"><link rel="prefetch" href="/notes/assets/js/413.37b4db3c.js"><link rel="prefetch" href="/notes/assets/js/414.41f671f5.js"><link rel="prefetch" href="/notes/assets/js/415.5797eb0a.js"><link rel="prefetch" href="/notes/assets/js/416.5ec4dc00.js"><link rel="prefetch" href="/notes/assets/js/417.471b2657.js"><link rel="prefetch" href="/notes/assets/js/418.93bf4420.js"><link rel="prefetch" href="/notes/assets/js/419.483e75ac.js"><link rel="prefetch" href="/notes/assets/js/42.cefe7a26.js"><link rel="prefetch" href="/notes/assets/js/420.56ce2d80.js"><link rel="prefetch" href="/notes/assets/js/421.b1ed157a.js"><link rel="prefetch" href="/notes/assets/js/422.04adcf20.js"><link rel="prefetch" href="/notes/assets/js/423.4ef69085.js"><link rel="prefetch" href="/notes/assets/js/424.ee6c15ef.js"><link rel="prefetch" href="/notes/assets/js/425.ae40528c.js"><link rel="prefetch" href="/notes/assets/js/426.2ff5016e.js"><link rel="prefetch" href="/notes/assets/js/427.074660ad.js"><link rel="prefetch" href="/notes/assets/js/428.2eda923b.js"><link rel="prefetch" href="/notes/assets/js/429.2a6e7e7b.js"><link rel="prefetch" href="/notes/assets/js/43.bfaf3f9b.js"><link rel="prefetch" href="/notes/assets/js/430.f0fd4c44.js"><link rel="prefetch" href="/notes/assets/js/431.4c505b64.js"><link rel="prefetch" href="/notes/assets/js/432.2a188436.js"><link rel="prefetch" href="/notes/assets/js/433.8610f4fb.js"><link rel="prefetch" href="/notes/assets/js/434.ec313029.js"><link rel="prefetch" href="/notes/assets/js/435.0c6c1f6a.js"><link rel="prefetch" href="/notes/assets/js/436.2a3487db.js"><link rel="prefetch" href="/notes/assets/js/437.d132d27c.js"><link rel="prefetch" href="/notes/assets/js/438.ff4142c6.js"><link rel="prefetch" href="/notes/assets/js/439.0c474ccb.js"><link rel="prefetch" href="/notes/assets/js/44.d3333975.js"><link rel="prefetch" href="/notes/assets/js/440.7b882d15.js"><link rel="prefetch" href="/notes/assets/js/441.ab1bf371.js"><link rel="prefetch" href="/notes/assets/js/442.134f0456.js"><link rel="prefetch" href="/notes/assets/js/443.c6393d96.js"><link rel="prefetch" href="/notes/assets/js/444.2c9b16f1.js"><link rel="prefetch" href="/notes/assets/js/445.6decb9e1.js"><link rel="prefetch" href="/notes/assets/js/446.d6fccd3e.js"><link rel="prefetch" href="/notes/assets/js/447.90f4ab24.js"><link rel="prefetch" href="/notes/assets/js/448.55d87002.js"><link rel="prefetch" href="/notes/assets/js/449.308c7f75.js"><link rel="prefetch" href="/notes/assets/js/45.e63f1fc2.js"><link rel="prefetch" href="/notes/assets/js/450.72f5279e.js"><link rel="prefetch" href="/notes/assets/js/451.26d6e91c.js"><link rel="prefetch" href="/notes/assets/js/452.3184fdb4.js"><link rel="prefetch" href="/notes/assets/js/453.9d6d9af6.js"><link rel="prefetch" href="/notes/assets/js/454.f03ce01d.js"><link rel="prefetch" href="/notes/assets/js/455.f6fbc7a5.js"><link rel="prefetch" href="/notes/assets/js/456.cb5a72dd.js"><link rel="prefetch" href="/notes/assets/js/457.83d89808.js"><link rel="prefetch" href="/notes/assets/js/458.a4761ae2.js"><link rel="prefetch" href="/notes/assets/js/459.0a453ce2.js"><link rel="prefetch" href="/notes/assets/js/46.285c38fe.js"><link rel="prefetch" href="/notes/assets/js/460.39470724.js"><link rel="prefetch" href="/notes/assets/js/461.d84eac44.js"><link rel="prefetch" href="/notes/assets/js/462.2542bb78.js"><link rel="prefetch" href="/notes/assets/js/463.9b5715d0.js"><link rel="prefetch" href="/notes/assets/js/464.f9215414.js"><link rel="prefetch" href="/notes/assets/js/465.c6571f8d.js"><link rel="prefetch" href="/notes/assets/js/466.10c3a729.js"><link rel="prefetch" href="/notes/assets/js/467.917690aa.js"><link rel="prefetch" href="/notes/assets/js/468.e4e05fb0.js"><link rel="prefetch" href="/notes/assets/js/469.6ee1f0bf.js"><link rel="prefetch" href="/notes/assets/js/47.e179b803.js"><link rel="prefetch" href="/notes/assets/js/470.109daa98.js"><link rel="prefetch" href="/notes/assets/js/471.20e17539.js"><link rel="prefetch" href="/notes/assets/js/472.de465397.js"><link rel="prefetch" href="/notes/assets/js/473.697bece5.js"><link rel="prefetch" href="/notes/assets/js/474.c0500f50.js"><link rel="prefetch" href="/notes/assets/js/475.7a0de490.js"><link rel="prefetch" href="/notes/assets/js/476.3b6c2663.js"><link rel="prefetch" href="/notes/assets/js/477.fe61522a.js"><link rel="prefetch" href="/notes/assets/js/478.b33a7744.js"><link rel="prefetch" href="/notes/assets/js/479.29224709.js"><link rel="prefetch" href="/notes/assets/js/48.f6ca3943.js"><link rel="prefetch" href="/notes/assets/js/49.574091cd.js"><link rel="prefetch" href="/notes/assets/js/5.a09c7da9.js"><link rel="prefetch" href="/notes/assets/js/50.3a0ff583.js"><link rel="prefetch" href="/notes/assets/js/51.57db0225.js"><link rel="prefetch" href="/notes/assets/js/52.0ecf5693.js"><link rel="prefetch" href="/notes/assets/js/53.1f76ee65.js"><link rel="prefetch" href="/notes/assets/js/54.abcb27d8.js"><link rel="prefetch" href="/notes/assets/js/55.2e25c2d0.js"><link rel="prefetch" href="/notes/assets/js/56.bb6f65a5.js"><link rel="prefetch" href="/notes/assets/js/57.da9a0590.js"><link rel="prefetch" href="/notes/assets/js/58.1835be90.js"><link rel="prefetch" href="/notes/assets/js/59.af675de6.js"><link rel="prefetch" href="/notes/assets/js/6.3cd82c9a.js"><link rel="prefetch" href="/notes/assets/js/60.0ef43601.js"><link rel="prefetch" href="/notes/assets/js/61.c74e9f39.js"><link rel="prefetch" href="/notes/assets/js/62.1bedfdf6.js"><link rel="prefetch" href="/notes/assets/js/63.a0deef5f.js"><link rel="prefetch" href="/notes/assets/js/64.382724a8.js"><link rel="prefetch" href="/notes/assets/js/65.89029c37.js"><link rel="prefetch" href="/notes/assets/js/66.81ca5639.js"><link rel="prefetch" href="/notes/assets/js/67.cbbb38d7.js"><link rel="prefetch" href="/notes/assets/js/68.000bfd35.js"><link rel="prefetch" href="/notes/assets/js/69.c2d07d56.js"><link rel="prefetch" href="/notes/assets/js/7.7d6ad91c.js"><link rel="prefetch" href="/notes/assets/js/70.217180de.js"><link rel="prefetch" href="/notes/assets/js/71.98765c00.js"><link rel="prefetch" href="/notes/assets/js/72.1c955ea7.js"><link rel="prefetch" href="/notes/assets/js/73.d2706f61.js"><link rel="prefetch" href="/notes/assets/js/74.60cc2008.js"><link rel="prefetch" href="/notes/assets/js/75.4b361813.js"><link rel="prefetch" href="/notes/assets/js/76.38d96cc9.js"><link rel="prefetch" href="/notes/assets/js/77.438af426.js"><link rel="prefetch" href="/notes/assets/js/78.bcd8b2ed.js"><link rel="prefetch" href="/notes/assets/js/79.f5f68b99.js"><link rel="prefetch" href="/notes/assets/js/8.d3bec3c0.js"><link rel="prefetch" href="/notes/assets/js/80.56ed8ba9.js"><link rel="prefetch" href="/notes/assets/js/81.f8dbf3cf.js"><link rel="prefetch" href="/notes/assets/js/82.e794a34b.js"><link rel="prefetch" href="/notes/assets/js/83.e2c87fbb.js"><link rel="prefetch" href="/notes/assets/js/84.1afc1456.js"><link rel="prefetch" href="/notes/assets/js/85.b7c7c05b.js"><link rel="prefetch" href="/notes/assets/js/86.f3a12e4c.js"><link rel="prefetch" href="/notes/assets/js/87.4cd44f76.js"><link rel="prefetch" href="/notes/assets/js/88.57dc2780.js"><link rel="prefetch" href="/notes/assets/js/89.f604b335.js"><link rel="prefetch" href="/notes/assets/js/9.e1f148ec.js"><link rel="prefetch" href="/notes/assets/js/90.6ee867a3.js"><link rel="prefetch" href="/notes/assets/js/91.d509a153.js"><link rel="prefetch" href="/notes/assets/js/92.dbe29fc9.js"><link rel="prefetch" href="/notes/assets/js/93.00a12f11.js"><link rel="prefetch" href="/notes/assets/js/94.b910d5ad.js"><link rel="prefetch" href="/notes/assets/js/95.f2f8c392.js"><link rel="prefetch" href="/notes/assets/js/96.846bfa91.js"><link rel="prefetch" href="/notes/assets/js/97.2aaef136.js"><link rel="prefetch" href="/notes/assets/js/98.2fc7c21e.js"><link rel="prefetch" href="/notes/assets/js/99.c571e816.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.db9e9bf4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">我的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/guide/" class="nav-link">
  指南
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/guide/" class="nav-link">
  指南
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Apache Zookeeper</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/apache-dubbo-zookeeper/" aria-current="page" class="sidebar-link">微服务架构需要解决的问题</a></li><li><a href="/notes/apache-dubbo-zookeeper/什么是分布式协调技术.html" class="sidebar-link">什么是分布式协调技术</a></li><li><a href="/notes/apache-dubbo-zookeeper/什么是分布式锁.html" class="sidebar-link">什么是分布式锁</a></li><li><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html" class="active sidebar-link">什么是 Zookeeper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#zookeeper-的数据模型" class="sidebar-link">Zookeeper 的数据模型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#znode-包含哪些元素" class="sidebar-link">Znode 包含哪些元素</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#zookeeper-的基本操作" class="sidebar-link">Zookeeper 的基本操作</a></li><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#zookeeper-的事件通知" class="sidebar-link">Zookeeper 的事件通知</a></li><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#zookeeper-的一致性" class="sidebar-link">Zookeeper 的一致性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#什么是-zab" class="sidebar-link">什么是 ZAB</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#zookeeper-的应用场景" class="sidebar-link">Zookeeper 的应用场景</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#分布式锁" class="sidebar-link">分布式锁</a></li><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#服务注册和发现" class="sidebar-link">服务注册和发现</a></li><li class="sidebar-sub-header"><a href="/notes/apache-dubbo-zookeeper/什么是 Zookeeper.html#共享配置和状态信息" class="sidebar-link">共享配置和状态信息</a></li></ul></li></ul></li><li><a href="/notes/apache-dubbo-zookeeper/Zookeeper 如何实现分布式锁.html" class="sidebar-link">Zookeeper 如何实现分布式锁</a></li><li><a href="/notes/apache-dubbo-zookeeper/基于 Docker 安装 Zookeeper.html" class="sidebar-link">基于 Docker 安装 Zookeeper</a></li><li><a href="/notes/apache-dubbo-zookeeper/附：Linux 下手动安装 Zookeeper.html" class="sidebar-link">附：Linux 下手动安装 Zookeeper</a></li><li><a href="/notes/apache-dubbo-zookeeper/Zookeeper 配置说明.html" class="sidebar-link">Zookeeper 配置说明</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="什么是-zookeeper"><a href="#什么是-zookeeper" class="header-anchor">#</a> 什么是 Zookeeper</h1> <h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>ZooKeeper 是一种分布式协调服务，用于管理大型主机。在分布式环境中协调和管理服务是一个复杂的过程。ZooKeeper 通过其简单的架构和 API 解决了这个问题。ZooKeeper 允许开发人员专注于核心应用程序逻辑，而不必担心应用程序的分布式特性。</p> <p>以下为 Zookeeper 的基本概念</p> <h2 id="zookeeper-的数据模型"><a href="#zookeeper-的数据模型" class="header-anchor">#</a> Zookeeper 的数据模型</h2> <p>Zookeeper 的数据模型是什么样子呢？它很像数据结构当中的树，也很像文件系统的目录。</p> <p><img src="data:image/png;base64,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" alt="img"></p> <p>树是由节点所组成，Zookeeper 的数据存储也同样是基于节点，这种节点叫做 <strong>Znode</strong></p> <p>但是，不同于树的节点，Znode 的引用方式是路径引用，类似于文件路径：</p> <div class="language- extra-class"><pre class="language-text"><code>/动物/猫
/汽车/宝马
</code></pre></div><p>这样的层级结构，让每一个 Znode 节点拥有唯一的路径，就像命名空间一样对不同信息作出清晰的隔离。</p> <h3 id="znode-包含哪些元素"><a href="#znode-包含哪些元素" class="header-anchor">#</a> Znode 包含哪些元素</h3> <p><img src="data:image/png;base64,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" alt="img"></p> <ul><li>data：Znode 存储的数据信息。</li> <li>ACL：记录 Znode 的访问权限，即哪些人或哪些 IP 可以访问本节点。</li> <li>stat：包含 Znode 的各种元数据，比如事务 ID、版本号、时间戳、大小等等。</li> <li>child：当前节点的子节点引用</li></ul> <p>这里需要注意一点，Zookeeper 是为读多写少的场景所设计。Znode 并不是用来存储大规模业务数据，而是用于存储少量的状态和配置信息，<code>每个节点的数据最大不能超过 1MB</code>。</p> <h2 id="zookeeper-的基本操作"><a href="#zookeeper-的基本操作" class="header-anchor">#</a> Zookeeper 的基本操作</h2> <p>创建节点</p> <div class="language- extra-class"><pre class="language-text"><code>create
</code></pre></div><p>删除节点</p> <div class="language- extra-class"><pre class="language-text"><code>delete
</code></pre></div><p>判断节点是否存在</p> <div class="language- extra-class"><pre class="language-text"><code>exists
</code></pre></div><p>获得一个节点的数据</p> <div class="language- extra-class"><pre class="language-text"><code>getData
</code></pre></div><p>设置一个节点的数据</p> <div class="language- extra-class"><pre class="language-text"><code>setData
</code></pre></div><p>获取节点下的所有子节点</p> <div class="language- extra-class"><pre class="language-text"><code>getChildren
</code></pre></div><p>这其中，<code>exists</code>，<code>getData</code>，<code>getChildren</code> 属于读操作。Zookeeper 客户端在请求读操作的时候，可以选择是否设置 <strong>Watch</strong></p> <h2 id="zookeeper-的事件通知"><a href="#zookeeper-的事件通知" class="header-anchor">#</a> Zookeeper 的事件通知</h2> <p>我们可以把 <strong>Watch</strong> 理解成是注册在特定 Znode 上的触发器。当这个 Znode 发生改变，也就是调用了 <code>create</code>，<code>delete</code>，<code>setData</code> 方法的时候，将会触发 Znode 上注册的对应事件，请求 Watch 的客户端会接收到异步通知。</p> <p>具体交互过程如下：</p> <ul><li>客户端调用 <code>getData</code> 方法，<code>watch</code> 参数是 <code>true</code>。服务端接到请求，返回节点数据，并且在对应的哈希表里插入被 Watch 的 Znode 路径，以及 Watcher 列表。</li></ul> <p><img src="/notes/assets/img/Lusifer201810170012.f90d0855.png" alt="img"></p> <ul><li>当被 Watch 的 Znode 已删除，服务端会查找哈希表，找到该 Znode 对应的所有 Watcher，异步通知客户端，并且删除哈希表中对应的 Key-Value。</li></ul> <p><img src="/notes/assets/img/Lusifer201810170013.e49b942c.png" alt="img"></p> <h2 id="zookeeper-的一致性"><a href="#zookeeper-的一致性" class="header-anchor">#</a> Zookeeper 的一致性</h2> <p>Zookeeper 身为分布式系统协调服务，如果自身挂了如何处理呢？为了防止单机挂掉的情况，Zookeeper 维护了一个集群。如下图：</p> <p><img src="/notes/assets/img/20181017182528.5e97c8fe.jpg" alt="img"></p> <p>Zookeeper Service 集群是一主多从结构。</p> <p>在更新数据时，首先更新到主节点（这里的节点是指服务器，不是 Znode），再同步到从节点。</p> <p>在读取数据时，直接读取任意从节点。</p> <p>为了保证主从节点的数据一致性，Zookeeper 采用了 <strong>ZAB 协议</strong>，这种协议非常类似于一致性算法 <strong>Paxos</strong> 和 <strong>Raft</strong>。</p> <h3 id="什么是-zab"><a href="#什么是-zab" class="header-anchor">#</a> 什么是 ZAB</h3> <p>Zookeeper Atomic Broadcast，有效解决了 Zookeeper 集群崩溃恢复，以及主从同步数据的问题。</p> <h4 id="zab-协议定义的三种节点状态"><a href="#zab-协议定义的三种节点状态" class="header-anchor">#</a> ZAB 协议定义的三种节点状态</h4> <ul><li>Looking ：选举状态。</li> <li>Following ：Follower 节点（从节点）所处的状态。</li> <li>Leading ：Leader 节点（主节点）所处状态。</li></ul> <h4 id="最大-zxid"><a href="#最大-zxid" class="header-anchor">#</a> 最大 ZXID</h4> <p>最大 ZXID 也就是节点本地的最新事务编号，包含 epoch 和计数两部分。epoch 是纪元的意思，相当于 Raft 算法选主时候的 term。</p> <h4 id="zab-的崩溃恢复"><a href="#zab-的崩溃恢复" class="header-anchor">#</a> ZAB 的崩溃恢复</h4> <p>假如 Zookeeper 当前的主节点挂掉了，集群会进行崩溃恢复。ZAB 的崩溃恢复分成三个阶段：</p> <p><strong>Leader election</strong></p> <p>选举阶段，此时集群中的节点处于 Looking 状态。它们会各自向其他节点发起投票，投票当中包含自己的服务器 ID 和最新事务 ID（ZXID）。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATUAAAC4CAYAAACCRnu2AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAK6ElEQVR4nO3dv28b5x3H8e8jBIIhKBBQxEibwUsCFNmoopBEUpRsD0XgRfHQsRmyGIgpOs6QqR0yBwhsSErgJUtmN8jQAB5k06Qp0lnkIUBQ/wFBgwYG1AiC69p6OkRn3Z3uB0k/9D3Pc++XcBDv13MPT3o++t5RopTWWgDAF1NFdwAATHql6A5gfO98sLW7t39QKbofZTM3O/Pg1hfNea5y7ESoOWxv/6DS+fKjortROivvf8YPEosRao6jWCjMb5RSj6jW7MM9NWA8jB1LUak5j0oBCCPUHEekAVGEmutINSCC+wIAvEKoAfAKl5+O4+oTiCLUXEeqARGEmvNINSCMUHMckQZE8UIBAK9QqbmOUg2IoFJznLZkqlUXMudH2df2CXajUoMV6tWFE8t6/e8K6AlcR6hhbPEgyprPC6hhAqxeXSDokItQc12B7+fV27n//HG9tpg5n9vPnPX12uJw7aD0CDXH2TLE7+3cj/QlPh+2HARUSD227F44EI/ml2uL1jxf2ItQw9iSwilJPKDSlo3aLpCEUMPY4sG0XFtMXAa8TISa42y7xZTUn2GXDbPetucL+xBqKESjTgWHySDUMDFpwdXtpd9PA14Uf1HgOG3RR7w/nd5AOr3Bie0a9cXI56zH4WUikriuiOcJexFqeKlW6kvS6Q1ERKTTG8hKfSnzcSAIyGBfIA2Xn66zqHDo3Bvk9ie+TXg+7TEwCio1AF6hUnMcxQwQRaUGwCuEmusMvUnY6vJS8W9UNsHJ6POD1Qg1x5n4FYXVxpK0u/0Ty4LJ1K9CDNueyWMGH+1u31i7sBuhhkTtbj/y2WSbprYDkhBqJXe2US1NiLS7fTnbqBbdDUwYr346zsQfeGe1kbXu3MpxQNzp9Idep3Xy+rR9guV3Ov3I47TjJa2PHx/+olLDWM6tVOVOp/98CodK1rpAEDrh8Am2T9s23G7a8eJtonwINRQiCKJREFYYBqFWcmmV1CSZPl7wHPKCcpwghXu4p+Y4begGUVo74eXnV2ty++5O6j7h+ax1QRvnVqqR9vL6k9ZmuF9558PU+YK9FF9kd1Xf+1R/u9k00lY8sM6v1hK3S9smHk5J6+LLgvmk9Unbpc3n9SXp+b2IC81NGXz18WkR+ZnxYx9CzWEmQ81lSYFsKsCSEGp24/LTcQwpke1Y9bZ9d4fzUmKEmusYvSIist0OVWack1Lj1U8AXqFScxxFCRBFqDmPWAPCCDXXkWlABPfUAHiFSs1xFGpAFJUaAK9QqbmOUg2IINQcR6YBUYSa84g1IIx7agC8QqXmON4kAogi1Bw2NzvzYO3Dzyuj7vfGqT358fHcJLpkrbdnf5If9l830pZ6+uR7Iw1hIng/NYcppYKHr42y3/r6+r83NjZOm++RnS5durQ5PT198cmTJ1/fuHHD5BvQ8X5qFuKemsO01sHbUx+OOI2zj5PT2tram9PT0xdEZHp6evrC2tramwbbh4W4/PSA1vrRKNu3Wi0RkUdlqDJardaWiLx6NPvqmTNntrTWfyyyT5gsKjV468qVKxdF5C359fdeHh99fqvZbF4stGOYKEIN3tJa/00pNSUiN0XklIjcVEpNTU1N/bXgrmGCuPyEt549e3Zha2vrXyIirVZLb2xs/FlrLZcvX/5t0X3D5FCpwVtBoA27HH4g1AB4hVAD4BVCDYBXCDUAXiHUAHiFUAPgFUINgFcINQBeIdQAeIVQA+AVQg2AVwg1AF4h1AB4hVAD4BVCDYBXCDUAXiHUAHiFUAPgFUINgFcINQBeIdQAeIVQA+AVQg2AVwg1AF6x/j+0z8/P6+Dx7u6umvQ6wDfz8/M66ft8nDESXp62b+G01tZOlUpFp81PYl1ZpvX1dW37157nbGaqVCo66Xvc1PixcXL28tO6nw6AhdLGic/jx+rLz0mceJ+/mIAJeWPE9ts3VodaWN59gXFOblqbQFnkjZ+kMRK/x2bbGHLi8jPrxO3u7qrd3V2VdANz3DaBssgaP3mBZivrQ20S4UOgAdmGecXUVlaHWvzEhk/ouCc3q02gLLK+710fI9bfU0s7ofGSOfxFyFqX1Sbgm+B7PR5U446RvP1sYHWo5Z2wrPVlfCkbiJvEGLF9DFl9+QkAoyLUAHiFUAPgFUINgFcINQBeIdQAeIVQA+AVQg2AVwg1AF4h1AB4hVAD4BVCDYBXCDUAXiHUAHiFUAPgFUINgFcINQBeIdQAeIVQK4mrV6/+bpTlgKus/h8FMOfw8PAfrVbr91rrW0opaTabf2+1Wn8SkYci8oei+weYQqVWHp+IyP+UUu9qrR8rpd6dmpp6enh4+EnRHQNMItRK4vr1698opR6KiFJKnRIRpbV+uLm5+U3RfQNMItRKRCn1FxH55Wj2l6N5wCuEWolcu3btnyJyU0T+KyI3j+YBryit+Wflrnrng63dvf2Dyqj7vT37k/yw//okumStN07tyY+P54y0NTc78+DWF815xo6dePXTYXv7B5XOlx8V3Y3SWXn/s5F/kODlIdQcR61QmBml1AHVmn0INdcxpooyIyIHRXcCJxFqziPVgDBe/QTgFSo1x1GnAVGEmutINSCCy08AXqFScxyFGhBFpQbAK1RqruOXP4EIQs1xRBoQxeUnAK8QagC8Qqi5Ttsx1ZYWMudH2df6CVbjnprjbBpj8b6M0rdadeHEsl7/uxfqD8qJUMPY6rEgyprPC6hhAqxeXSDokItQc15xtVqvf//543p1MXM+v5/Z6+vVxSHbQdkRao6z5dfU7u3cj/QlPh+2XFs8sew4tI73j88v1xateb6wF6GGsSWFU5J4QKUtG7VdIAmhhrHFg2m5tpi4DHiZCDXH2XY1ltSfYZcNs9625wv7EGqus22UD5lgjbwKjlTDmAg1TEyjnhxc3V76/TTgRfEXBc4r+tfr479qfzzf7Q2k2xuc2O7XsDv+nPU4ukwS1/EnBQgj1BxX9PBOj7TkqVFfkk5vIFpEOr2BNOpLmY+DqdMbPJ9seJ6wF5efrrNolHXuDXL7E98mPJ/2GBgFlRoAr1CpOY5iBoiiUgPgFULNdYbufq8uLxX/SsMEJ6PPD1Yj1BynDXysNpak3e2fWBZMJo4RbnOY7UwdM/hod/vG2oXdCDUkanf7kc8m2zS1HZCEUCu5s41qaUKk3e3L2Ua16G5gwnj103Umroay2shYd3blOCDanf7Q60Qnr0/bJ1je7vQjj9OOl3jM2PHhL0LNcUVl2rmVqtyJBU8wn7UuaPNOp/98u+AY4f3Dxw22DbeTdrx4m6M+X7iPy08UIh58wxh1e5QToVZyQRX0Mpk+XvAc8oJynCCFe7j8dJyp9+xPaye8/PxqVW7f7Seui89nrQvaOLcSbS+vP2lthvuVdz74Hwf+U5qvsrOq732qv91sGmnr/GpNbt/dicwnSdsmvDxtXXxZMJ+0Pmm7tPm8viQ9vxdxobkpg68+Pi0iPzN+7EOoOcxkqLksKZBNBVgSQs1uXH46jiElsh2r3rbv7nBeSoxQcx2jV0REttuhyoxzUmq8+gnAK4QaAK9w+ek4rrSAKELNdbz6BkRw+QnAK1RqjqNOA6Ko1AB4hUrNdZRqQASh5jgyDYji8hOAV6jUnEetBoQRaq4j04AIQs1xZBoQRag5bG525sHah59Xiu5H2ainT74vug9Ix5tEOkwpFTx8rch+lBhvEmkhKjWHBQNKKfWfgrsCWOP/HydQi6YK+mYAAAAASUVORK5CYII=" alt="img"></p> <p>接下来，节点会用自身的 ZXID 和从其他节点接收到的 ZXID 做比较，如果发现别人家的 ZXID 比自己大，也就是数据比自己新，那么就重新发起投票，投票给目前已知最大的 ZXID 所属节点。</p> <p><img src="data:image/png;base64,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" alt="img"></p> <p>每次投票后，服务器都会统计投票数量，判断是否有某个节点得到半数以上的投票。如果存在这样的节点，该节点将会成为准 Leader，状态变为 Leading。其他节点的状态变为 Following。</p> <p><img src="data:image/png;base64,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" alt="img"></p> <p><strong>Discovery</strong></p> <p>发现阶段，用于在从节点中发现最新的 ZXID 和事务日志。或许有人会问：既然 Leader 被选为主节点，已经是集群里数据最新的了，为什么还要从节点中寻找最新事务呢？</p> <p>这是为了防止某些意外情况，比如因网络原因在上一阶段产生多个 Leader 的情况。</p> <p>所以这一阶段，Leader 集思广益，接收所有 Follower 发来各自的最新 epoch 值。Leader 从中选出最大的 epoch，基于此值加 1，生成新的 epoch 分发给各个 Follower。</p> <p>各个 Follower 收到全新的 epoch 后，返回 ACK 给 Leader，带上各自最大的 ZXID 和历史事务日志。Leader 选出最大的 ZXID，并更新自身历史日志。</p> <p><strong>Synchronization</strong></p> <p>同步阶段，把 Leader 刚才收集得到的最新历史事务日志，同步给集群中所有的 Follower。只有当半数 Follower 同步成功，这个准 Leader 才能成为正式的 Leader。</p> <p>自此，故障恢复正式完成。</p> <h4 id="zab-的数据写入"><a href="#zab-的数据写入" class="header-anchor">#</a> ZAB 的数据写入</h4> <p><strong>Broadcast</strong></p> <p>ZAB 的数据写入涉及到 Broadcast 阶段，简单来说，就是 Zookeeper 常规情况下更新数据的时候，由 Leader 广播到所有的 Follower。其过程如下：</p> <ul><li>客户端发出写入数据请求给任意 Follower。</li> <li>Follower 把写入数据请求转发给 Leader。</li> <li>Leader 采用二阶段提交方式，先发送 Propose 广播给 Follower。</li> <li>Follower 接到 Propose 消息，写入日志成功后，返回 ACK 消息给 Leader。</li> <li>Leader 接到半数以上ACK消息，返回成功给客户端，并且广播 Commit 请求给 Follower</li></ul> <p><img src="/notes/assets/img/20181017192657.98d7c69e.jpg" alt="img"></p> <p>ZAB 协议既不是强一致性，也不是弱一致性，而是处于两者之间的<strong>单调一致性（顺序一致性）</strong>。它依靠事务 ID 和版本号，保证了数据的更新和读取是有序的。</p> <h2 id="zookeeper-的应用场景"><a href="#zookeeper-的应用场景" class="header-anchor">#</a> Zookeeper 的应用场景</h2> <h3 id="分布式锁"><a href="#分布式锁" class="header-anchor">#</a> 分布式锁</h3> <p>这是雅虎研究员设计 Zookeeper 的初衷。利用 Zookeeper 的临时顺序节点，可以轻松实现分布式锁。</p> <h3 id="服务注册和发现"><a href="#服务注册和发现" class="header-anchor">#</a> 服务注册和发现</h3> <p>利用 Znode 和 Watcher，可以实现分布式服务的注册和发现。最著名的应用就是阿里的分布式 RPC 框架 Dubbo。</p> <h3 id="共享配置和状态信息"><a href="#共享配置和状态信息" class="header-anchor">#</a> 共享配置和状态信息</h3> <p>Redis 的分布式解决方案 Codis，就利用了 Zookeeper 来存放数据路由表和 codis-proxy 节点的元信息。同时 codis-config 发起的命令都会通过 ZooKeeper 同步到各个存活的 codis-proxy。</p> <p>此外，Kafka、HBase、Hadoop，也都依靠Zookeeper同步节点信息，实现高可用。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">9/14/2023, 1:18:45 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/apache-dubbo-zookeeper/什么是分布式锁.html" class="prev">
        什么是分布式锁
      </a></span> <span class="next"><a href="/notes/apache-dubbo-zookeeper/Zookeeper 如何实现分布式锁.html">
        Zookeeper 如何实现分布式锁
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/notes/assets/js/app.4394edef.js" defer></script><script src="/notes/assets/js/3.499ba1d5.js" defer></script><script src="/notes/assets/js/30.27ec9a11.js" defer></script>
  </body>
</html>
