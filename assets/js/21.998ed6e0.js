(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1037:function(s,t,a){s.exports=a.p+"assets/img/Snipaste_2022-12-12_11-15-12.7cf613b9.png"},1038:function(s,t,a){s.exports=a.p+"assets/img/image-20221213093431735.0f90040d.png"},1039:function(s,t,a){s.exports=a.p+"assets/img/image-20221213093739842.fee0177f.png"},1040:function(s,t,a){s.exports=a.p+"assets/img/image-20221212134426769.6ea891ec.png"},1041:function(s,t,a){s.exports=a.p+"assets/img/image-20221212134522720.188b559f.png"},1042:function(s,t,a){s.exports=a.p+"assets/img/image-20221212134833846.d9b280fc.png"},1043:function(s,t){s.exports="data:image/png;base64,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"},1044:function(s,t){s.exports="data:image/png;base64,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"},1045:function(s,t,a){s.exports=a.p+"assets/img/image-20221212143729369.9f42f64e.png"},1046:function(s,t,a){s.exports=a.p+"assets/img/image-20221212151625672.84d33a4b.png"},1047:function(s,t,a){s.exports=a.p+"assets/img/image-20221212151754622.ec3f43dd.png"},1597:function(s,t,a){"use strict";a.r(t);var e=a(26),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"redis-集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-集群"}},[s._v("#")]),s._v(" Redis 集群")]),s._v(" "),e("h2",{attrs:{id:"问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[s._v("#")]),s._v(" 问题")]),s._v(" "),e("p",[s._v("容量不够，redis如何进行扩容？")]),s._v(" "),e("p",[s._v("并发写操作， redis如何分摊？")]),s._v(" "),e("p",[e("font",{attrs:{color:"red"}},[s._v("另外，主从模式，薪火相传模式，主机宕机，导致ip地址发生变化，应用程序中配置需要修改对应的主机地址、端口等信息。")])],1),s._v(" "),e("p",[s._v("之前通过代理主机来解决，但是"),e("strong",[s._v("redis3.0")]),s._v("中提供了解决方案。就是"),e("strong",[s._v("无中心化集群")]),s._v("配置。")]),s._v(" "),e("h2",{attrs:{id:"什么是集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是集群"}},[s._v("#")]),s._v(" 什么是集群")]),s._v(" "),e("p",[s._v("Redis 集群实现了对Redis的水平扩容，即启动N个redis节点，将整个数据库分布存储在这N个节点中，每个节点存储总数据的1/N。")]),s._v(" "),e("p",[s._v("Redis 集群通过分区（partition）来提供一定程度的可用性（availability）： 即使集群中有一部分节点失效或者无法进行通讯， 集群也可以继续处理命令请求。")]),s._v(" "),e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("制作6个实例，6379，6380，6381，6382，6383，6384")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("配置基本信息")])]),s._v(" "),e("li",[e("div",{staticClass:"language-properties extra-class"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启daemonize yes")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Pid文件名字")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定端口")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Log文件名字")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Dump.rdb名字")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Appendonly 关掉或者换名字")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cluster-enabled yes    打开集群模式")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cluster-config-file nodes-6379.conf  设定节点配置文件名")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cluster-node-timeout 15000   设定节点失联时间，超过该时间（毫秒），集群自动进行主从切换。")]),s._v("\n")])])])]),s._v(" "),e("li",[e("div",{staticClass:"language-properties extra-class"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("include")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/root/myredis/redis.conf")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("port")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("6379")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("pidfile")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"/var/run/redis_6379.pid"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("dbfilename")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"dump6379.rdb"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("dir")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"/root/redis-cluster"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("logfile")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"/root/redis-cluster/redis_err_6379.log"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("cluster-enabled")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("yes")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("cluster-config-file")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("nodes-6379.conf")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("cluster-node-timeout")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("15000")]),s._v("\n")])])])])])]),s._v(" "),e("li",[e("p",[s._v("复制五份")]),s._v(" "),e("ul",[e("li",[s._v("使用:%s/6379/638x 替换5个文件配置")])])]),s._v(" "),e("li",[e("p",[s._v("启动服务")]),s._v(" "),e("ul",[e("li",[s._v("redis-server ~/redis-cluster/redis6379.conf")]),s._v(" "),e("li",[s._v("....")])])]),s._v(" "),e("li",[e("p",[s._v("将六个节点合成一个集群")]),s._v(" "),e("ul",[e("li",[s._v("组合之前，请确保所有redis实例启动后，nodes-xxxx.conf文件都生成正常。")])])])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1037),alt:""}})]),s._v(" "),e("ul",[e("li",[e("p",[s._v("启动集群")]),s._v(" "),e("ul",[e("li",[e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v("  /opt/redis-6.2.1/src\n\nredis-cli --cluster create --cluster-replicas "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100:6379 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100:6380 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100:6381 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100:6382 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100:6383 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100:6384\n")])])])]),s._v(" "),e("li",[e("p",[s._v("此处不要用127.0.0.1，请用真实IP地址，--replicas 1 采用最简单的方式配置集群，一台主机，一台从机，正好三组。")])]),s._v(" "),e("li",[e("blockquote",[e("p",[e("font",{attrs:{color:"red"}},[s._v("注意：上面的命令只在第一次创建集群时使用，如果想要删除原来的数据重新创建的话，需要删除~/redis-cluster文件夹中的其他文件，仅仅保留.conf文件。")])],1)])])])])]),s._v(" "),e("p",[e("img",{attrs:{src:a(392),alt:"image-20221212132519599"}})]),s._v(" "),e("h2",{attrs:{id:"安装-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker"}},[s._v("#")]),s._v(" 安装（Docker）")]),s._v(" "),e("h3",{attrs:{id:"创建目录及文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建目录及文件"}},[s._v("#")]),s._v(" 创建目录及文件")]),s._v(" "),e("p",[s._v("分别在 "),e("code",[s._v("192.168.25.99")]),s._v(" 和 "),e("code",[s._v("192.168.25.100")]),s._v(" 两台机器上执行以下操作。")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /usr/local/docker/redis-cluster\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换至指定目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/docker/redis-cluster\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编写 redis-cluster.tmpl 文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" redis-cluster.tmpl\n")])])]),e("h3",{attrs:{id:"编写配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编写配置文件"}},[s._v("#")]),s._v(" 编写配置文件")]),s._v(" "),e("p",[e("code",[s._v("192.168.25.99")]),s._v(" 机器的 "),e("code",[s._v("redis-cluster.tmpl")]),s._v(" 文件内容如下：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("port ${PORT}\nrequirepass 111111\nmasterauth 111111\nprotected-mode no\ndaemonize no\nappendonly yes\ncluster-enabled yes\ncluster-config-file nodes.conf\ncluster-node-timeout 15000\ncluster-announce-ip 192.168.25.99\ncluster-announce-port ${PORT}\ncluster-announce-bus-port 1${PORT}\n")])])]),e("p",[e("code",[s._v("192.168.25.100")]),s._v(" 机器的 "),e("code",[s._v("redis-cluster.tmpl")]),s._v(" 文件内容如下：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("port ${PORT}\nrequirepass 111111\nmasterauth 111111\nprotected-mode no\ndaemonize no\nappendonly yes\ncluster-enabled yes\ncluster-config-file nodes.conf\ncluster-node-timeout 15000\ncluster-announce-ip 192.168.25.100\ncluster-announce-port ${PORT}\ncluster-announce-bus-port 1${PORT}\n")])])]),e("ul",[e("li",[e("code",[s._v("port")]),s._v("：节点端口；")]),s._v(" "),e("li",[e("code",[s._v("requirepass")]),s._v("：添加访问认证；")]),s._v(" "),e("li",[e("code",[s._v("masterauth")]),s._v("：如果主节点开启了访问认证，从节点访问主节点需要认证；")]),s._v(" "),e("li",[e("code",[s._v("protected-mode")]),s._v("：保护模式，默认值 yes，即开启。开启保护模式以后，需配置 "),e("code",[s._v("bind ip")]),s._v(" 或者设置访问密码；关闭保护模式，外部网络可以直接访问；")]),s._v(" "),e("li",[e("code",[s._v("daemonize")]),s._v("：是否以守护线程的方式启动（后台启动），默认 no；")]),s._v(" "),e("li",[e("code",[s._v("appendonly")]),s._v("：是否开启 AOF 持久化模式，默认 no；")]),s._v(" "),e("li",[e("code",[s._v("cluster-enabled")]),s._v("：是否开启集群模式，默认 no；")]),s._v(" "),e("li",[e("code",[s._v("cluster-config-file")]),s._v("：集群节点信息文件；")]),s._v(" "),e("li",[e("code",[s._v("cluster-node-timeout")]),s._v("：集群节点连接超时时间；")]),s._v(" "),e("li",[e("code",[s._v("cluster-announce-ip")]),s._v("：集群节点 IP，填写宿主机的 IP；")]),s._v(" "),e("li",[e("code",[s._v("cluster-announce-port")]),s._v("：集群节点映射端口；")]),s._v(" "),e("li",[e("code",[s._v("cluster-announce-bus-port")]),s._v("：集群节点总线端口。")])]),s._v(" "),e("blockquote",[e("p",[s._v("每个 Redis 集群节点都需要打开"),e("strong",[s._v("两个 TCP 连接")]),s._v("。一个用于为客户端提供服务的正常 Redis TCP 端口，例如 6379。还有一个基于 6379 端口加 10000 的端口，比如 16379。")]),s._v(" "),e("p",[s._v("​\t第二个端口用于集群总线，这是一个使用二进制协议的节点到节点通信通道。节点使用集群总线进行故障检测、配置更新、故障转移授权等等。客户端永远不要尝试与集群总线端口通信，与正常的 Redis 命令端口通信即可，但是请确保防火墙中的这两个端口都已经打开，否则 Redis 集群节点将无法通信。")])]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("192.168.25.99")]),s._v(" 机器的 "),e("code",[s._v("redis-cluster")]),s._v(" 目录下执行以下命令：")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("port")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6373")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("/conf "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PORT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v(" envsubst "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" redis-cluster.tmpl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("/conf/redis.conf "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("/data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])])]),e("p",[s._v("在 "),e("code",[s._v("192.168.25.100")]),s._v(" 机器的 "),e("code",[s._v("redis-cluster")]),s._v(" 目录下执行以下命令：")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("port")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6374")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6376")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("/conf "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PORT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v(" envsubst "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" redis-cluster.tmpl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("/conf/redis.conf "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("/data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])])]),e("p",[e("code",[s._v("192.168.25.99")]),s._v(" 目录结构：")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1038),alt:"image-20221213093431735"}})]),s._v(" "),e("p",[e("code",[s._v("192.168.25.100")]),s._v(" 目录结构：")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1039),alt:"image-20221213093739842"}})]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("============================== 192.168.25.99 ==============================\nport 6371\nrequirepass 111111\nmasterauth 111111\nprotected-mode no\ndaemonize no\nappendonly yes\ncluster-enabled yes\ncluster-config-file nodes.conf\ncluster-node-timeout 15000\ncluster-announce-ip 192.168.25.99\ncluster-announce-port 6371\ncluster-announce-bus-port 16371\n\nport 6372\nrequirepass 111111\nmasterauth 111111\nprotected-mode no\ndaemonize no\nappendonly yes\ncluster-enabled yes\ncluster-config-file nodes.conf\ncluster-node-timeout 15000\ncluster-announce-ip 192.168.25.99\ncluster-announce-port 6372\ncluster-announce-bus-port 16372\n\nport 6373\nrequirepass 111111\nmasterauth 111111\nprotected-mode no\ndaemonize no\nappendonly yes\ncluster-enabled yes\ncluster-config-file nodes.conf\ncluster-node-timeout 15000\ncluster-announce-ip 192.168.25.99\ncluster-announce-port 6373\ncluster-announce-bus-port 16373\n============================== 192.168.25.99 ==============================\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("============================== 192.168.25.100 ==============================\nport 6374\nrequirepass 111111\nmasterauth 111111\nprotected-mode no\ndaemonize no\nappendonly yes\ncluster-enabled yes\ncluster-config-file nodes.conf\ncluster-node-timeout 15000\ncluster-announce-ip 192.168.25.100\ncluster-announce-port 6374\ncluster-announce-bus-port 16374\n\nport 6375\nrequirepass 111111\nmasterauth 111111\nprotected-mode no\ndaemonize no\nappendonly yes\ncluster-enabled yes\ncluster-config-file nodes.conf\ncluster-node-timeout 15000\ncluster-announce-ip 192.168.25.100\ncluster-announce-port 6375\ncluster-announce-bus-port 16375\n\nport 6376\nrequirepass 111111\nmasterauth 111111\nprotected-mode no\ndaemonize no\nappendonly yes\ncluster-enabled yes\ncluster-config-file nodes.conf\ncluster-node-timeout 15000\ncluster-announce-ip 192.168.25.100\ncluster-announce-port 6376\ncluster-announce-bus-port 16376\n============================== 192.168.25.100 ==============================\n")])])]),e("p",[s._v("在 "),e("code",[s._v("192.168.25.99")]),s._v(" 机器的 "),e("code",[s._v("/usr/local/docker/redis-cluster")]),s._v(" 目录下创建 "),e("code",[s._v("docker-compose.yml")]),s._v(" 文件并编辑。")]),s._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 描述 Compose 文件的版本信息")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3.8"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义服务，可以多个")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-6371")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务名称")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("6.2.5 "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建容器时所需的镜像")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器名称")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器总是重新启动")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("network_mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"host"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# host 网络模式")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据卷，目录挂载")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6371/conf/redis.conf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/local/etc/redis/redis.conf\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6371/data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server /usr/local/etc/redis/redis.conf "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 覆盖容器启动后默认执行的命令")]),s._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-6372")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("6.2.5\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6372")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("network_mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"host"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6372/conf/redis.conf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/local/etc/redis/redis.conf\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6372/data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server /usr/local/etc/redis/redis.conf\n\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-6373")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("6.2.5\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6373")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("network_mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"host"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6373/conf/redis.conf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/local/etc/redis/redis.conf\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6373/data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server /usr/local/etc/redis/redis.conf\n")])])]),e("p",[s._v("在 "),e("code",[s._v("192.168.25.100")]),s._v(" 机器的 "),e("code",[s._v("/usr/local/docker/redis-cluster")]),s._v(" 目录下创建 "),e("code",[s._v("docker-compose.yml")]),s._v(" 文件并编辑。")]),s._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 描述 Compose 文件的版本信息")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3.8"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义服务，可以多个")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-6374")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务名称")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("6.2.5 "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建容器时所需的镜像")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6374")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器名称")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器总是重新启动")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("network_mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"host"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# host 网络模式")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据卷，目录挂载")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6374/conf/redis.conf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/local/etc/redis/redis.conf\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6374/data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server /usr/local/etc/redis/redis.conf "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 覆盖容器启动后默认执行的命令")]),s._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-6375")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("6.2.5\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6375")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("network_mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"host"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6375/conf/redis.conf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/local/etc/redis/redis.conf\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6375/data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server /usr/local/etc/redis/redis.conf\n\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-6376")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("6.2.5\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6376")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("network_mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"host"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6376/conf/redis.conf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/local/etc/redis/redis.conf\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./6376/data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server /usr/local/etc/redis/redis.conf\n")])])]),e("h3",{attrs:{id:"启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),e("p",[s._v("执行"),e("code",[s._v("docker-compose up -d")]),s._v("，启动两台服务器。")]),s._v(" "),e("h3",{attrs:{id:"创建-redis-cluster-集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建-redis-cluster-集群"}},[s._v("#")]),s._v(" 创建 Redis Cluster 集群")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it redis-6371 "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换至指定目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/bin/\n")])])]),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("redis-cli -a "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111")]),s._v(" --cluster create "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.99:6371 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.99:6372 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.99:6373 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100:6374 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100:6375 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100:6376 --cluster-replicas "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),e("p",[e("img",{attrs:{src:a(392),alt:"image-20221212132519599"}})]),s._v(" "),e("h3",{attrs:{id:"查看集群状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看集群状态"}},[s._v("#")]),s._v(" 查看集群状态")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it redis-6371 "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换至指定目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/bin/\nredis-cli -a "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111")]),s._v(" --cluster check "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100:6375\n")])])]),e("h3",{attrs:{id:"查看集群信息和节点信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看集群信息和节点信息"}},[s._v("#")]),s._v(" 查看集群信息和节点信息")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接至集群某个节点")]),s._v("\nredis-cli -c -a "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111")]),s._v(" -h "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".25.100 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6376")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看集群信息")]),s._v("\ncluster info\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看集群结点信息")]),s._v("\ncluster nodes\n")])])]),e("h2",{attrs:{id:"登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[s._v("#")]),s._v(" 登录")]),s._v(" "),e("h3",{attrs:{id:"普通方式登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#普通方式登录"}},[s._v("#")]),s._v(" 普通方式登录")]),s._v(" "),e("p",[s._v("可能直接进入读主机，存储数据时，会出现MOVED重定向操作。所以，应该以集群方式登录。")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1040),alt:"image-20221212134426769"}})]),s._v(" "),e("h3",{attrs:{id:"集群策略登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集群策略登录"}},[s._v("#")]),s._v(" 集群策略登录")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1041),alt:"image-20221212134522720"}})]),s._v(" "),e("h3",{attrs:{id:"通过-cluster-nodes-命令查看集群信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通过-cluster-nodes-命令查看集群信息"}},[s._v("#")]),s._v(" 通过 cluster nodes 命令查看集群信息")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1042),alt:"image-20221212134833846"}})]),s._v(" "),e("h2",{attrs:{id:"如何分配这六个节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何分配这六个节点"}},[s._v("#")]),s._v(" 如何分配这六个节点")]),s._v(" "),e("p",[s._v("一个集群至少要有三个主节点。")]),s._v(" "),e("p",[s._v("选项 "),e("code",[s._v("--cluster-replicas 1")]),s._v(" 表示我们希望为集群中的每个主节点创建一个从节点。")]),s._v(" "),e("p",[e("strong",[s._v("分配原则尽量保证每个主数据库运行在不同的IP地址，每个从库和主库不在一个IP地址上。")])]),s._v(" "),e("h2",{attrs:{id:"什么是-slots"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是-slots"}},[s._v("#")]),s._v(" 什么是 slots")]),s._v(" "),e("p",[s._v("一个 Redis 集群包含 16384 个插槽（hash slot）， 数据库中的每个键都属于这 16384 个插槽的其中一个，")]),s._v(" "),e("p",[s._v("集群使用公式 "),e("strong",[s._v("CRC16(key) % 16384")]),s._v(" 来计算键 key 属于哪个槽， 其中 CRC16(key) 语句用于计算键 key 的 CRC16 校验和 。")]),s._v(" "),e("p",[s._v("集群中的每个节点负责处理一部分插槽。 举个例子， 如果一个集群可以有主节点， 其中：")]),s._v(" "),e("p",[s._v("节点 A 负责处理 0 号至 5460 号插槽。")]),s._v(" "),e("p",[s._v("节点 B 负责处理 5461 号至 10922 号插槽。")]),s._v(" "),e("p",[s._v("节点 C 负责处理 10923 号至 16383 号插槽。")]),s._v(" "),e("h2",{attrs:{id:"在集群中录入值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在集群中录入值"}},[s._v("#")]),s._v(" 在集群中录入值")]),s._v(" "),e("p",[s._v("在redis-cli每次录入、查询键值，redis都会计算出该key应该送往的插槽，如果不是该客户端对应服务器的插槽，redis会报错，并告知应前往的redis实例地址和端口。")]),s._v(" "),e("p",[s._v("redis-cli客户端提供了 "),e("font",{attrs:{color:"red"}},[s._v("–c 参数实现自动重定向。")])],1),s._v(" "),e("p",[s._v("如 "),e("code",[s._v("redis-cli -c –p 6379")]),s._v(" 登入后，再录入、查询键值对可以自动重定向。")]),s._v(" "),e("h3",{attrs:{id:"批量操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#批量操作"}},[s._v("#")]),s._v(" 批量操作")]),s._v(" "),e("p",[s._v("不在一个slot下的键值，是不能使用mget,mset等多键操作。")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1043),alt:"image-20221212142512387"}})]),s._v(" "),e("p",[s._v("可以通过{}来定义组的概念，从而使key中{}内相同内容的键值对放到一个slot中去。")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1044),alt:"image-20221212142913294"}})]),s._v(" "),e("h2",{attrs:{id:"查询集群中的值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查询集群中的值"}},[s._v("#")]),s._v(" 查询集群中的值")]),s._v(" "),e("p",[e("code",[s._v("CLUSTER GETKEYSINSLOT <slot> <count>")]),s._v("返回 count 个 slot 槽中的键。")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1045),alt:"image-20221212143729369"}})]),s._v(" "),e("h2",{attrs:{id:"故障恢复"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#故障恢复"}},[s._v("#")]),s._v(" 故障恢复")]),s._v(" "),e("p",[s._v("如果主节点下线？从节点能否自动升为主节点？注意："),e("font",{attrs:{color:"red"}},[e("strong",[s._v("15秒超时。")])])],1),s._v(" "),e("p",[e("img",{attrs:{src:a(1046),alt:"image-20221212151625672"}})]),s._v(" "),e("p",[s._v("主节点恢复后，主从关系会如何？主节点回来变成从机。")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1047),alt:"image-20221212151754622"}})]),s._v(" "),e("p",[s._v("如果所有某一段插槽的主从节点都宕掉，redis服务是否还能继续？")]),s._v(" "),e("ul",[e("li",[s._v("如果某一段插槽的主从都挂掉\n"),e("ul",[e("li",[s._v("redis.conf中的参数 cluster-require-full-coverage 为 yes，整个集群都挂掉")]),s._v(" "),e("li",[s._v("redis.conf中的参数 cluster-require-full-coverage 为 no，该插槽数据全都不能使用，也无法存储。")])])])]),s._v(" "),e("h2",{attrs:{id:"集群的-jedis-开发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集群的-jedis-开发"}},[s._v("#")]),s._v(" 集群的 Jedis 开发")]),s._v(" "),e("p",[s._v("即使连接的不是主机，集群会自动切换主机存储。主机写，从机读。")]),s._v(" "),e("p",[s._v("无中心化主从集群。无论从哪台主机写的数据，其他主机上都能读到数据。")]),s._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisClusterTest")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),e("span",{pre:!0,attrs:{class:"token generics"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" set "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),e("span",{pre:!0,attrs:{class:"token generics"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        set"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.25.100"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisCluster")]),s._v(" jedisCluster "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisCluster")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("set"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        jedisCluster"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jedisCluster"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),e("h2",{attrs:{id:"redis-集群提供了以下好处"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-集群提供了以下好处"}},[s._v("#")]),s._v(" Redis 集群提供了以下好处")]),s._v(" "),e("ul",[e("li",[s._v("实现扩容")]),s._v(" "),e("li",[s._v("分摊压力")]),s._v(" "),e("li",[s._v("无中心配置相对简单")])]),s._v(" "),e("h2",{attrs:{id:"redis-集群的不足"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-集群的不足"}},[s._v("#")]),s._v(" Redis 集群的不足")]),s._v(" "),e("ul",[e("li",[s._v("多键操作是不被支持的")]),s._v(" "),e("li",[s._v("多键的Redis事务是不被支持的。lua脚本不被支持")]),s._v(" "),e("li",[s._v("由于集群方案出现较晚，很多公司已经采用了其他的集群方案，而代理或者客户端分片的方案想要迁移至redis cluster，需要整体迁移而不是逐步过渡，复杂度较大")])])])}),[],!1,null,null,null);t.default=n.exports},392:function(s,t,a){s.exports=a.p+"assets/img/image-20221212131514714.d71c4a17.png"}}]);