(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{1090:function(t,s,n){t.exports=n.p+"assets/img/20190604010905.ff5c93ec.png"},1091:function(t,s,n){t.exports=n.p+"assets/img/20190604013518.1f369029.png"},1092:function(t,s,n){t.exports=n.p+"assets/img/20190604014207.97818e8e.png"},1093:function(t,s,n){t.exports=n.p+"assets/img/20190604022029.fab25579.png"},1619:function(t,s,n){"use strict";n.r(s);var e=n(26),a=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"解决-node-无法加入的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决-node-无法加入的问题"}},[t._v("#")]),t._v(" 解决 Node 无法加入的问题")]),t._v(" "),e("h2",{attrs:{id:"问题描述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),e("p",[t._v("当我们使用 "),e("code",[t._v("kubeadm join")]),t._v(" 命令将 Node 节点加入集群时，你会发现所有 "),e("code",[t._v("kubectl")]),t._v(" 命令均不可用（呈现阻塞状态，并不会返回响应结果），我们可以在 Node 节点中通过 "),e("code",[t._v("kubeadm reset")]),t._v(" 命令将 Node 节点下线，此时回到 Master 节点再使用 "),e("code",[t._v("watch kubectl get pods --all-namespaces")]),t._v(" 可以看到下图中报错了，"),e("code",[t._v("coredns-xxx-xxx")]),t._v(" 状态为 "),e("code",[t._v("CrashLoopBackOff")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(1090),alt:"img"}})]),t._v(" "),e("h2",{attrs:{id:"解决方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),e("p",[t._v("从上面的错误信息不难看出应该是出现了网络问题，而我们在安装过程中只使用了一个网络插件 "),e("strong",[t._v("Calico")]),t._v(" ，那么该错误是不是由 Calico 引起的呢？带着这个疑问我们去到 Calico 官网再看一下它的说明，官网地址：https://docs.projectcalico.org/v3.7/getting-started/kubernetes/")]),t._v(" "),e("p",[t._v("在它的 Quickstart 里有两段话（属于特别提醒），截图如下：")]),t._v(" "),e("p",[e("img",{attrs:{src:n(1091),alt:"img"}})]),t._v(" "),e("p",[t._v("上面这段话的主要意思是：当 "),e("code",[t._v("kubeadm")]),t._v(" 安装完成后不要关机，继续完成后续的安装步骤；这也说明了安装 Kubernetes 的过程不要出现中断一口气搞定（不过这不是重点）(*￣rǒ￣)")]),t._v(" "),e("p",[e("img",{attrs:{src:n(1092),alt:"img"}})]),t._v(" "),e("p",[t._v("上面这段话的主要意思是：如果你的网络在 "),e("code",[t._v("192.168.0.0/16")]),t._v(" 网段中，则必须选择一个不同的 Pod 网络；恰巧咱们的网络范围（我虚拟机的 IP 范围是 "),e("code",[t._v("192.168.141.0/24")]),t._v("）和该网段重叠 (ノへ￣、)；好吧，当时做单节点集群时因为没啥问题而忽略了 ♪(^∇^*)")]),t._v(" "),e("p",[t._v("so，能够遇到这个问题主要是因为虚拟机 IP 范围刚好和 Calico 默认网段重叠导致的，所以想要解决这个问题，咱们就需要修改 Calico 的网段了（当然也可以改虚拟机的），换句话说就是大家重装一下 o (一︿一 +) o")]),t._v(" "),e("p",[e("strong",[t._v("按照以下标准步骤重装即可")])]),t._v(" "),e("h2",{attrs:{id:"重置-kubernetes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重置-kubernetes"}},[t._v("#")]),t._v(" 重置 Kubernetes")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("kubeadm reset\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出如下")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("reset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" WARNING: Changes made to this "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),t._v(" by "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kubeadm init'")]),t._v(" or "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kubeadm join'")]),t._v(" will be reverted.\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("reset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Are you sure you want to proceed? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("y/N"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": y\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Running pre-flight checks\nW0604 01:55:28.517280   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("22688")]),t._v(" reset.go:234"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("reset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" No kubeadm config, using etcd pod spec to get data directory\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("reset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" No etcd config found. Assuming external etcd\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("reset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Please manually reset etcd to prevent further issues\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("reset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Stopping the kubelet "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("reset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" unmounting mounted directories "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/lib/kubelet"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("reset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Deleting contents of stateful directories: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/var/lib/kubelet /etc/cni/net.d /var/lib/dockershim /var/run/kubernetes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("reset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Deleting contents of config directories: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/etc/kubernetes/manifests /etc/kubernetes/pki"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("reset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Deleting files: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/etc/kubernetes/admin.conf /etc/kubernetes/kubelet.conf /etc/kubernetes/bootstrap-kubelet.conf /etc/kubernetes/controller-manager.conf /etc/kubernetes/scheduler.conf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nThe reset process does not reset or clean up iptables rules or IPVS tables.\nIf you wish to reset iptables, you must "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" so manually.\nFor example:\niptables -F "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" iptables -t nat -F "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" iptables -t mangle -F "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" iptables -X\n\nIf your cluster was setup to utilize IPVS, run ipvsadm --clear "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("or similar"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nto reset your system's IPVS tables.\n")])])]),e("h2",{attrs:{id:"删除-kubectl-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除-kubectl-配置"}},[t._v("#")]),t._v(" 删除 kubectl 配置")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -fr ~/.kube/\n")])])]),e("h2",{attrs:{id:"启用-ipvs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启用-ipvs"}},[t._v("#")]),t._v(" 启用 IPVS")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("modprobe -- ip_vs\nmodprobe -- ip_vs_rr\nmodprobe -- ip_vs_wrr\nmodprobe -- ip_vs_sh\nmodprobe -- nf_conntrack_ipv4\n")])])]),e("h2",{attrs:{id:"导出并修改配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#导出并修改配置文件"}},[t._v("#")]),t._v(" 导出并修改配置文件")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("kubeadm config print init-defaults --kubeconfig ClusterConfiguration "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" kubeadm.yml\n")])])]),e("p",[t._v("配置文件修改如下")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kubeadm.k8s.io/v1beta1\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bootstrapTokens")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("groups")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" system"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("bootstrappers"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("kubeadm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("default"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("token\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" abcdef.0123456789abcdef\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ttl")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 24h0m0s\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("usages")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" signing\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" authentication\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" InitConfiguration\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("localAPIEndpoint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("advertiseAddress")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 192.168.141.150\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bindPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("6443")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nodeRegistration")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("criSocket")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /var/run/dockershim.sock\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kubernetes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("master"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("01")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("taints")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("effect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NoSchedule\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("role.kubernetes.io/master\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiServer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("timeoutForControlPlane")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 4m0s\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kubeadm.k8s.io/v1beta1\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("certificatesDir")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /etc/kubernetes/pki\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("clusterName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kubernetes\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("controlPlaneEndpoint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.141.200:6444"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("controllerManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dns")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CoreDNS\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("etcd")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("local")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dataDir")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /var/lib/etcd\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("imageRepository")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.aliyuncs.com/google_containers\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ClusterConfiguration\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kubernetesVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1.14.2\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networking")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dnsDomain")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cluster.local\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 主要修改在这里，替换 Calico 网段为我们虚拟机不重叠的网段（这里用的是 Flannel 默认网段）")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("podSubnet")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10.244.0.0/16"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("serviceSubnet")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10.96.0.0/12\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scheduler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kubeproxy.config.k8s.io/v1alpha1\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" KubeProxyConfiguration\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("featureGates")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SupportIPVSProxyMode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ipvs\n")])])]),e("h2",{attrs:{id:"kubeadm-初始化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kubeadm-初始化"}},[t._v("#")]),t._v(" kubeadm 初始化")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("kubeadm init --config"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("kubeadm.yml --experimental-upload-certs "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("tee")]),t._v(" kubeadm-init.log\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出如下")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("init"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Using Kubernetes version: v1.14.2\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Running pre-flight checks\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("WARNING IsDockerSystemdCheck"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": detected "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cgroupfs"')]),t._v(" as the Docker cgroup driver. The recommended driver is "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"systemd"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" Please follow the guide at https://kubernetes.io/docs/setup/cri/\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Pulling images required "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" setting up a Kubernetes cluster\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" This might take a minute or two, depending on the speed of your internet connection\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" You can also perform this action "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" beforehand using "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kubeadm config images pull'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing kubelet environment "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" with flags to "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/lib/kubelet/kubeadm-flags.env"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing kubelet configuration to "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/lib/kubelet/config.yaml"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Activating the kubelet "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Using certificateDir folder "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/kubernetes/pki"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"front-proxy-ca"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"front-proxy-client"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"etcd/ca"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"etcd/peer"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" etcd/peer serving cert is signed "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" DNS names "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubernetes-master-01 localhost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" and IPs "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.150 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 ::1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"etcd/healthcheck-client"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apiserver-etcd-client"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"etcd/server"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" etcd/server serving cert is signed "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" DNS names "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubernetes-master-01 localhost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" and IPs "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.150 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 ::1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ca"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apiserver"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" apiserver serving cert is signed "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" DNS names "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubernetes-master-01 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" and IPs "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.96")]),t._v(".0.1 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.150 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.200"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apiserver-kubelet-client"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sa"')]),t._v(" key and public key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubeconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Using kubeconfig folder "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/kubernetes"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("endpoint"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" WARNING: port specified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" controlPlaneEndpoint overrides bindPort "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the controlplane address\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubeconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin.conf"')]),t._v(" kubeconfig "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("endpoint"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" WARNING: port specified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" controlPlaneEndpoint overrides bindPort "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the controlplane address\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubeconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kubelet.conf"')]),t._v(" kubeconfig "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("endpoint"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" WARNING: port specified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" controlPlaneEndpoint overrides bindPort "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the controlplane address\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubeconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"controller-manager.conf"')]),t._v(" kubeconfig "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("endpoint"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" WARNING: port specified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" controlPlaneEndpoint overrides bindPort "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the controlplane address\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubeconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scheduler.conf"')]),t._v(" kubeconfig "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Using manifest folder "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/kubernetes/manifests"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Creating static Pod manifest "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-apiserver"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Creating static Pod manifest "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-controller-manager"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Creating static Pod manifest "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-scheduler"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("etcd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Creating static Pod manifest "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v(" etcd "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/kubernetes/manifests"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("wait-control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Waiting "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the kubelet to boot up the control plane as static Pods from directory "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/kubernetes/manifests"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" This can take up to 4m0s\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("apiclient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" All control plane components are healthy after "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("24.507568")]),t._v(" seconds\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("upload-config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" storing the configuration used "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" ConfigMap "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kubeadm-config"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-system"')]),t._v(" Namespace\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Creating a ConfigMap "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kubelet-config-1.14"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" namespace kube-system with the configuration "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the kubelets "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the cluster\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("upload-certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Storing the certificates "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" ConfigMap "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kubeadm-certs"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-system"')]),t._v(" Namespace\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("upload-certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Using certificate key:\na662b8364666f82c93cc5cd4fb4fabb623bbe9afdb182da353ac40f1752dfa4a\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mark-control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Marking the node kubernetes-master-01 as control-plane by adding the label "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"node-role.kubernetes.io/master=''\"")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mark-control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Marking the node kubernetes-master-01 as control-plane by adding the taints "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node-role.kubernetes.io/master:NoSchedule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("bootstrap-token"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Using token: abcdef.0123456789abcdef\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("bootstrap-token"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("bootstrap-token"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" configured RBAC rules to allow Node Bootstrap tokens to post CSRs "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" order "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" nodes to get long term certificate credentials\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("bootstrap-token"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("bootstrap-token"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" configured RBAC rules to allow certificate rotation "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" all node client certificates "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the cluster\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("bootstrap-token"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" creating the "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cluster-info"')]),t._v(" ConfigMap "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-public"')]),t._v(" namespace\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("addons"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Applied essential addon: CoreDNS\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("endpoint"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" WARNING: port specified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" controlPlaneEndpoint overrides bindPort "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the controlplane address\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("addons"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v("/.kube\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -i /etc/kubernetes/admin.conf "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v("/.kube/config\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v(" -u"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v(" -g"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v("/.kube/config\n\nYou should now deploy a pod network to the cluster.\nRun "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kubectl apply -f [podnetwork].yaml"')]),t._v(" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nYou can now "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" any number of the control-plane node running the following "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" on each as root:\n\n  kubeadm "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.200:6444 --token abcdef.0123456789abcdef "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --discovery-token-ca-cert-hash sha256:2ea8c138021fb1e184a24ed2a81c16c92f9f25c635c73918b1402df98f9c8aad "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --experimental-control-plane --certificate-key a662b8364666f82c93cc5cd4fb4fabb623bbe9afdb182da353ac40f1752dfa4a\n\nPlease note that the certificate-key gives access to cluster sensitive data, keep it secret"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\nAs a safeguard, uploaded-certs will be deleted "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" two hours"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" If necessary, you can use \n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kubeadm init phase upload-certs --experimental-upload-certs"')]),t._v(" to reload certs afterward.\n\nThen you can "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" any number of worker nodes by running the following on each as root:\n\nkubeadm "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.200:6444 --token abcdef.0123456789abcdef "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --discovery-token-ca-cert-hash sha256:2ea8c138021fb1e184a24ed2a81c16c92f9f25c635c73918b1402df98f9c8aad \n")])])]),e("h2",{attrs:{id:"配置-kubectl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-kubectl"}},[t._v("#")]),t._v(" 配置 kubectl")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置 kubectl")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v("/.kube\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -i /etc/kubernetes/admin.conf "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v("/.kube/config\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v(" -u"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v(" -g"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v("/.kube/config\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 验证是否成功")]),t._v("\nkubectl get node\n")])])]),e("h2",{attrs:{id:"下载-calico-配置文件并修改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载-calico-配置文件并修改"}},[t._v("#")]),t._v(" 下载 Calico 配置文件并修改")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://docs.projectcalico.org/v3.7/manifests/calico.yaml\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" calico.yaml\n")])])]),e("p",[t._v("修改第 611 行，将 "),e("code",[t._v("192.168.0.0/16")]),t._v(" 修改为 "),e("code",[t._v("10.244.0.0/16")]),t._v("，可以通过如下命令快速查找")]),t._v(" "),e("ul",[e("li",[t._v("显示行号："),e("code",[t._v(":set number")])]),t._v(" "),e("li",[t._v("查找字符："),e("code",[t._v("/要查找的字符")]),t._v("，输入小写 "),e("code",[t._v("n")]),t._v(" 下一个匹配项，输入大写 "),e("code",[t._v("N")]),t._v(" 上一个匹配项")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(1093),alt:"img"}})]),t._v(" "),e("h2",{attrs:{id:"安装-calico"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-calico"}},[t._v("#")]),t._v(" 安装 Calico")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("kubectl apply -f calico.yaml\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出如下")]),t._v("\nconfigmap/calico-config created\ncustomresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created\nclusterrole.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrolebinding.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrole.rbac.authorization.k8s.io/calico-node created\nclusterrolebinding.rbac.authorization.k8s.io/calico-node created\ndaemonset.extensions/calico-node created\nserviceaccount/calico-node created\ndeployment.extensions/calico-kube-controllers created\nserviceaccount/calico-kube-controllers created\n")])])]),e("h2",{attrs:{id:"加入-master-节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#加入-master-节点"}},[t._v("#")]),t._v(" 加入 Master 节点")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 示例如下，别忘记两个备用节点都要加入哦")]),t._v("\nkubeadm "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.200:6444 --token abcdef.0123456789abcdef "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --discovery-token-ca-cert-hash sha256:2ea8c138021fb1e184a24ed2a81c16c92f9f25c635c73918b1402df98f9c8aad "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --experimental-control-plane --certificate-key a662b8364666f82c93cc5cd4fb4fabb623bbe9afdb182da353ac40f1752dfa4a\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出如下")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Running pre-flight checks\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("WARNING IsDockerSystemdCheck"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": detected "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cgroupfs"')]),t._v(" as the Docker cgroup driver. The recommended driver is "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"systemd"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" Please follow the guide at https://kubernetes.io/docs/setup/cri/\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Reading configuration from the cluster"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" FYI: You can "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("look")]),t._v(" at this config "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" with "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kubectl -n kube-system get cm kubeadm-config -oyaml'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Running pre-flight checks before initializing the new control plane instance\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Pulling images required "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" setting up a Kubernetes cluster\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" This might take a minute or two, depending on the speed of your internet connection\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" You can also perform this action "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" beforehand using "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kubeadm config images pull'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("download-certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Downloading the certificates "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Secret "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kubeadm-certs"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-system"')]),t._v(" Namespace\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Using certificateDir folder "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/kubernetes/pki"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apiserver"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" apiserver serving cert is signed "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" DNS names "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubernetes-master-02 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" and IPs "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.96")]),t._v(".0.1 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.151 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.200"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apiserver-kubelet-client"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"front-proxy-client"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"etcd/server"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" etcd/server serving cert is signed "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" DNS names "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubernetes-master-02 localhost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" and IPs "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.151 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 ::1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"etcd/peer"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" etcd/peer serving cert is signed "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" DNS names "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubernetes-master-02 localhost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" and IPs "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.151 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 ::1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"etcd/healthcheck-client"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apiserver-etcd-client"')]),t._v(" certificate and key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Valid certificates and keys now exist "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/kubernetes/pki"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("certs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Using the existing "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sa"')]),t._v(" key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubeconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Generating kubeconfig files\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubeconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Using kubeconfig folder "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/kubernetes"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("endpoint"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" WARNING: port specified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" controlPlaneEndpoint overrides bindPort "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the controlplane address\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubeconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin.conf"')]),t._v(" kubeconfig "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubeconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"controller-manager.conf"')]),t._v(" kubeconfig "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubeconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scheduler.conf"')]),t._v(" kubeconfig "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Using manifest folder "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/kubernetes/manifests"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Creating static Pod manifest "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-apiserver"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Creating static Pod manifest "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-controller-manager"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Creating static Pod manifest "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-scheduler"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("check-etcd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Checking that the etcd cluster is healthy\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Downloading configuration "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the kubelet from the "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kubelet-config-1.14"')]),t._v(" ConfigMap "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the kube-system namespace\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing kubelet configuration to "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/lib/kubelet/config.yaml"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing kubelet environment "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" with flags to "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/lib/kubelet/kubeadm-flags.env"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Activating the kubelet "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Waiting "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the kubelet to perform the TLS Bootstrap"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("etcd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Announced new etcd member joining to the existing etcd cluster\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("etcd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Wrote Static Pod manifest "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" a "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v(" etcd member to "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/kubernetes/manifests/etcd.yaml"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("etcd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Waiting "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the new etcd member to "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" the cluster. This can take up to 40s\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("upload-config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" storing the configuration used "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" ConfigMap "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kubeadm-config"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kube-system"')]),t._v(" Namespace\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mark-control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Marking the node kubernetes-master-02 as control-plane by adding the label "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"node-role.kubernetes.io/master=''\"")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mark-control-plane"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Marking the node kubernetes-master-02 as control-plane by adding the taints "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node-role.kubernetes.io/master:NoSchedule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nThis node has joined the cluster and a new control plane instance was created:\n\n* Certificate signing request was sent to apiserver and approval was received.\n* The Kubelet was informed of the new secure connection details.\n* Control plane "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" label and taint were applied to the new node.\n* The Kubernetes control plane instances scaled up.\n* A new etcd member was added to the local/stacked etcd cluster.\n\nTo start administering your cluster from this node, you need to run the following as a regular user:\n\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v("/.kube\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -i /etc/kubernetes/admin.conf "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v("/.kube/config\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v(" -u"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v(" -g"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v("/.kube/config\n\nRun "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kubectl get nodes'")]),t._v(" to see this node "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" the cluster.\n")])])]),e("h2",{attrs:{id:"加入-node-节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#加入-node-节点"}},[t._v("#")]),t._v(" 加入 Node 节点")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 示例如下")]),t._v("\nkubeadm "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".141.200:6444 --token abcdef.0123456789abcdef "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --discovery-token-ca-cert-hash sha256:2ea8c138021fb1e184a24ed2a81c16c92f9f25c635c73918b1402df98f9c8aad\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出如下")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("     --discovery-token-ca-cert-hash sha256:2ea8c138021fb1e184a24ed2a81c16c92f9f25c635c73918b1402df98f9c8aad \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Running pre-flight checks\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("WARNING IsDockerSystemdCheck"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": detected "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cgroupfs"')]),t._v(" as the Docker cgroup driver. The recommended driver is "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"systemd"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" Please follow the guide at https://kubernetes.io/docs/setup/cri/\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Reading configuration from the cluster"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("preflight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" FYI: You can "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("look")]),t._v(" at this config "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" with "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kubectl -n kube-system get cm kubeadm-config -oyaml'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Downloading configuration "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the kubelet from the "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kubelet-config-1.14"')]),t._v(" ConfigMap "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the kube-system namespace\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing kubelet configuration to "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/lib/kubelet/config.yaml"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Writing kubelet environment "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" with flags to "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/lib/kubelet/kubeadm-flags.env"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Activating the kubelet "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubelet-start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Waiting "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the kubelet to perform the TLS Bootstrap"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\nThis node has joined the cluster:\n* Certificate signing request was sent to apiserver and a response was received.\n* The Kubelet was informed of the new secure connection details.\n\nRun "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kubectl get nodes'")]),t._v(" on the control-plane to see this node "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" the cluster.\n")])])]),e("h2",{attrs:{id:"验证是否可用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#验证是否可用"}},[t._v("#")]),t._v(" 验证是否可用")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("kubectl get node\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出如下，我们可以看到 Node 节点已经成功上线 ━━(￣ー￣*|||━━")]),t._v("\nNAME                   STATUS   ROLES    AGE     VERSION\nkubernetes-master-01   Ready    master   19m     v1.14.2\nkubernetes-master-02   Ready    master   4m46s   v1.14.2\nkubernetes-master-03   Ready    master   3m23s   v1.14.2\nkubernetes-node-01     Ready    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("   74s     v1.14.2\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),t._v(" kubectl get pods --all-namespaces\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出如下，coredns 也正常运行了")]),t._v("\nEvery "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".0s: kubectl get pods --all-namespaces                                                                                                 kubernetes-master-01: Tue Jun  "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" 02:31:43 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("\n\nNAMESPACE     NAME                                           READY   STATUS    RESTARTS   AGE\nkube-system   calico-kube-controllers-8646dd497f-hz5xp       "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          9m9s\nkube-system   calico-node-2z892                              "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          9m9s\nkube-system   calico-node-fljxv                              "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6m39s\nkube-system   calico-node-vprlw                              "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          5m16s\nkube-system   calico-node-xvqcx                              "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          3m7s\nkube-system   coredns-8686dcc4fd-5ndjm                       "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          21m\nkube-system   coredns-8686dcc4fd-zxtql                       "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          21m\nkube-system   etcd-kubernetes-master-01                      "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          20m\nkube-system   etcd-kubernetes-master-02                      "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6m37s\nkube-system   etcd-kubernetes-master-03                      "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          5m14s\nkube-system   kube-apiserver-kubernetes-master-01            "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          20m\nkube-system   kube-apiserver-kubernetes-master-02            "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6m37s\nkube-system   kube-apiserver-kubernetes-master-03            "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          5m14s\nkube-system   kube-controller-manager-kubernetes-master-01   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("          20m\nkube-system   kube-controller-manager-kubernetes-master-02   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6m37s\nkube-system   kube-controller-manager-kubernetes-master-03   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          5m14s\nkube-system   kube-proxy-68jqr                               "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          3m7s\nkube-system   kube-proxy-69bnn                               "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6m39s\nkube-system   kube-proxy-vvhp5                               "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          5m16s\nkube-system   kube-proxy-ws6wx                               "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          21m\nkube-system   kube-scheduler-kubernetes-master-01            "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("          20m\nkube-system   kube-scheduler-kubernetes-master-02            "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6m37s\nkube-system   kube-scheduler-kubernetes-master-03            "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          5m14s\n")])])]),e("p",[e("strong",[t._v("至此，Kubernetes 高可用集群算是彻底部署成功")])])])}),[],!1,null,null,null);s.default=a.exports}}]);