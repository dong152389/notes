(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{1466:function(t,a,s){"use strict";s.r(a);var n=s(26),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"修改-maven-下载源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改-maven-下载源"}},[t._v("#")]),t._v(" 修改 Maven 下载源")]),t._v(" "),n("p",[t._v("Gradle 自带的 Maven 源地址是国外的，该 Maven 源在国内的访问速度是很慢的，除非使用了特别的手段。一般情况下，建议使用国内的第三方开放的 Maven 源或企业内部自建 Maven 源。")]),t._v(" "),n("h2",{attrs:{id:"认识-init-d-文件夹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#认识-init-d-文件夹"}},[t._v("#")]),t._v(" 认识 init.d 文件夹")]),t._v(" "),n("p",[t._v("我们可以在 gradle 的 init.d 目录下创建以.gradle 结尾的文件，.gradle 文件可以实现在 build 开始之前执行，所以你可以在这个文件配置一些你想预先加载的操作。")]),t._v(" "),n("h2",{attrs:{id:"在-init-d-文件夹创建-init-gradle-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在-init-d-文件夹创建-init-gradle-文件"}},[t._v("#")]),t._v(" 在 init.d 文件夹创建 init.gradle 文件")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[t._v("allprojects "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    repositories "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        mavenLocal()\n        maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Alibaba"')]),t._v(" ; url "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://maven.aliyun.com/repository/public"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n        maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bstek"')]),t._v(" ; url "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://nexus.bsdn.org/content/groups/public/"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n        mavenCentral()\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    buildscript "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        repositories "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n            maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Alibaba"')]),t._v(" ; url 'https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//maven.aliyun.com/repository/public' } ")]),t._v("\n            maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bstek"')]),t._v(" ; url 'https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//nexus.bsdn.org/content/groups/public/' } ")]),t._v("\n            maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"M2"')]),t._v(" ; url 'https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//plugins.gradle.org/m2/' }")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"启用-init-gradle-文件的方法有"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启用-init-gradle-文件的方法有"}},[t._v("#")]),t._v(" 启用 init.gradle 文件的方法有")]),t._v(" "),n("ol",[n("li",[t._v("在命令行指定文件,例如：gradle --init-script yourdir/init.gradle -q taskName。你可以多次输入此命令来指定多个init文件")]),t._v(" "),n("li",[t._v("把init.gradle文件放到 USER_HOME/.gradle/ 目录下")]),t._v(" "),n("li",[t._v("把以.gradle结尾的文件放到 USER_HOME/.gradle/init.d/ 目录下")]),t._v(" "),n("li",[t._v("把以.gradle结尾的文件放到 GRADLE_HOME/init.d/ 目录下")])]),t._v(" "),n("blockquote",[n("p",[t._v("如果存在上面的4种方式的2种以上，gradle会按上面的1-4序号依次执行这些文件，如果给定目录下存在多个init脚本，会按拼音a-z顺序执行这些脚本， 每个init脚本都存在一个对应的gradle实例，你在这个文件中调用的所有方法和属性， 都会委托给这个gradle实例， 每个init脚本都实现了Script接口。")])]),t._v(" "),n("h2",{attrs:{id:"仓库地址说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#仓库地址说明"}},[t._v("#")]),t._v(" 仓库地址说明")]),t._v(" "),n("ul",[n("li",[t._v("mavenLocal(): 指定使用maven本地仓库，而本地仓库在配置maven时settings文件指定的仓库位置。如E:/repository， gradle查找jar包顺序如下：USER_HOME/.m2/settings.xml >> M2_HOME/conf/settings.xml >> USER_HOME/.m2/repository。")]),t._v(" "),n("li",[t._v("maven { url 地址：指定maven仓库，一般用私有仓库地址或其它的第三方库【比如阿里镜像仓库地址】。")]),t._v(" "),n("li",[t._v("mavenCentral()：这是Maven的中央仓库，无需配置，直接声明就可以使用。")]),t._v(" "),n("li",[t._v("jcenter()：JCenter中央仓库，实际也是是用的maven搭建的，但相比Maven仓库更友好，通过CDN分发，并且支持https访问，"),n("font",{attrs:{color:"blue"}},[t._v("在新版本中已经废弃了，替换为了mavenCentral()。")])],1)]),t._v(" "),n("blockquote",[n("p",[t._v("总之, gradle可以通过指定仓库地址为本地maven仓库地址和远程仓库地址相结合的方式，避免每次都会去远程仓库下载依赖库。这种方式也有一定的问题，如果本地maven仓库有这个依赖，就会从直接加载本地依赖，如果本地仓库没有该依赖，那么还是会从远程下载。但是下载的jar不是存储在本地maven仓库中，而是放在自己的"),n("font",{attrs:{color:"red"}},[t._v("缓存目录")]),t._v("中， 默认在USER_HOME/.gradle/caches目录，当然如果我们配置过GRADLE_USER_HOME环境变量， 则会放在GRADLE_USER_HOME/caches目录，那么可不可以将gradle caches指向maven repository。 但这是不行的， caches下载文件不是按照maven仓库中存放的方式。")],1)]),t._v(" "),n("h2",{attrs:{id:"阿里云仓库地址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#阿里云仓库地址"}},[t._v("#")]),t._v(" 阿里云仓库地址")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.aliyun.com/mvn/guide",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用指南"),n("OutboundLink")],1),t._v("。可以直接复制阿里提供的init.gradle。")]),t._v(" "),n("p",[n("img",{attrs:{src:s(805),alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:s(806),alt:""}})]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[t._v("allprojects "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 通常仓库放在这里 */")]),t._v("\n    repositories "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        mavenLocal()\n        maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Alibaba"')]),t._v(" ; url "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://maven.aliyun.com/repository/public"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bstek"')]),t._v(" ; url "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://nexus.bsdn.org/content/groups/public/"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Spring"')]),t._v(" ; url "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://maven.aliyun.com/repository/spring"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Google"')]),t._v(" ; url "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://maven.aliyun.com/repository/google"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        mavenCentral()\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 通常插件放在这里 */")]),t._v("\n    buildscript "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        repositories "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Alibaba"')]),t._v(" ; url 'https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//maven.aliyun.com/repository/public' } ")]),t._v("\n            maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bstek"')]),t._v(" ; url 'https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//nexus.bsdn.org/content/groups/public/' } ")]),t._v("\n            maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"M2"')]),t._v(" ; url 'https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//plugins.gradle.org/m2/' }")]),t._v("\n            maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Spring-Plugin"')]),t._v(" ; url 'https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//maven.aliyun.com/repository/spring-plugin' }")]),t._v("\n            maven "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Gradle-Plugin"')]),t._v(" ; url 'https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//maven.aliyun.com/repository/gradle-plugin' }")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports},805:function(t,a,s){t.exports=s.p+"assets/img/Snipaste_2022-08-29_10-02-12.c20adfdd.png"},806:function(t,a,s){t.exports=s.p+"assets/img/Snipaste_2022-08-29_10-04-18.30928e98.png"}}]);