(window.webpackJsonp=window.webpackJsonp||[]).push([[341],{1510:function(t,s,a){"use strict";a.r(s);var n=a(26),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"持久化类的三种状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持久化类的三种状态"}},[t._v("#")]),t._v(" 持久化类的三种状态")]),t._v(" "),a("h2",{attrs:{id:"持久化类的三种状态-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持久化类的三种状态-2"}},[t._v("#")]),t._v(" 持久化类的三种状态")]),t._v(" "),a("p",[t._v("持久化类 = Java类 + 映射")]),t._v(" "),a("h2",{attrs:{id:"瞬时态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#瞬时态"}},[t._v("#")]),t._v(" 瞬时态")]),t._v(" "),a("ul",[a("li",[t._v("这种对象没有唯一的标识OID, 没有Session")])]),t._v(" "),a("h2",{attrs:{id:"持久态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持久态"}},[t._v("#")]),t._v(" 持久态")]),t._v(" "),a("ul",[a("li",[t._v("这种对象有唯一的标识OID,被Session管理,称为是持久态对象\n"),a("ul",[a("li",[t._v("可以自动更新数据库")])])])]),t._v(" "),a("h2",{attrs:{id:"托管态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#托管态"}},[t._v("#")]),t._v(" 托管态")]),t._v(" "),a("ul",[a("li",[t._v("这种对象有唯一的标识OID,没有被Session管理,称为托管态对象")])]),t._v(" "),a("h2",{attrs:{id:"区分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#区分"}},[t._v("#")]),t._v(" 区分")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//三种状态")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("demo01")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Session")]),t._v(" session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HibernateUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("openSession")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Transaction")]),t._v(" transaction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Customer")]),t._v(" customer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Customer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//瞬时态对象:没有唯一标识oID,没有session管理")]),t._v("\n\t\tcustomer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCust_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"阿瑟东"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Serializable")]),t._v(" save "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("customer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//持久态对象:有唯一标识OID,被Session管理")]),t._v("\n\t\t\n\t\ttransaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("customer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCust_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//托管态对象:有唯一标识OID,没有被Session管理")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"持久化类的状态转换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持久化类的状态转换"}},[t._v("#")]),t._v(" 持久化类的状态转换")]),t._v(" "),a("h2",{attrs:{id:"瞬时态对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#瞬时态对象"}},[t._v("#")]),t._v(" 瞬时态对象")]),t._v(" "),a("ul",[a("li",[t._v("获得\n"),a("ul",[a("li",[t._v("Customer customer = new Customer();")])])]),t._v(" "),a("li",[t._v("状态转换\n"),a("ul",[a("li",[t._v("瞬时态->持久态\n"),a("ul",[a("li",[t._v("save(); saveOrUpdate();")])])]),t._v(" "),a("li",[t._v("瞬时态->托管态\n"),a("ul",[a("li",[t._v('customer.setCust_name("阿瑟东");')])])])])])]),t._v(" "),a("h2",{attrs:{id:"持久态对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持久态对象"}},[t._v("#")]),t._v(" 持久态对象")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("获得")]),t._v(" "),a("ul",[a("li",[t._v("get() load()")]),t._v(" "),a("li",[t._v("Customer customer = session.get(Customer.class,1l);")])])]),t._v(" "),a("li",[a("p",[t._v("状态转换")]),t._v(" "),a("ul",[a("li",[t._v("持久->瞬时\n"),a("ul",[a("li",[t._v("delete();")])])]),t._v(" "),a("li",[t._v("持久->托管\n"),a("ul",[a("li",[t._v("close(); clear();")])])])])])]),t._v(" "),a("h2",{attrs:{id:"托管态对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#托管态对象"}},[t._v("#")]),t._v(" 托管态对象")]),t._v(" "),a("ul",[a("li",[t._v("获得\n"),a("ul",[a("li",[t._v("Customer customer = new Customer();")]),t._v(" "),a("li",[t._v("customer.setCust_id(1l);")])])]),t._v(" "),a("li",[t._v("状态转换\n"),a("ul",[a("li",[t._v("托管->持久\n"),a("ul",[a("li",[t._v("update();saveOrUpdate();")])])]),t._v(" "),a("li",[t._v("托管->瞬时\n"),a("ul",[a("li",[t._v("customer.setCust_id(null);")])])])])])]),t._v(" "),a("h2",{attrs:{id:"持久态对象自动更新数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持久态对象自动更新数据库"}},[t._v("#")]),t._v(" 持久态对象自动更新数据库")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("demo02")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Session")]),t._v(" session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HibernateUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("openSession")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Transaction")]),t._v(" transaction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取持久太对象")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Customer")]),t._v(" customer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Customer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1l")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tcustomer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCust_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"阿斯旺"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//session.update(customer);不需要写也可以更新")]),t._v("\n\t\n\t\ttransaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);