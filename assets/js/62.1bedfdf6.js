(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{1452:function(t,a,s){"use strict";s.r(a);var n=s(26),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"dependencies"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[t._v("#")]),t._v(" Dependencies")]),t._v(" "),n("h2",{attrs:{id:"依赖的方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖的方式"}},[t._v("#")]),t._v(" 依赖的方式")]),t._v(" "),n("p",[t._v("Gradle 中的依赖分别为"),n("font",{attrs:{color:"red"}},[t._v("直接依赖，项目依赖，本地 jar 依赖  ")]),t._v("。")],1),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//①.依赖当前项目下的某个模块[子工程]")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("project")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("':subject01'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//②.直接依赖本地的某个jar文件")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("files")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'libs/foo.jar'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'libs/bar.jar'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//②.配置某文件夹作为依赖项")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileTree")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'libs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" include"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.jar'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//③.直接依赖")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.apache.logging.log4j:log4j:2.17.2'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("font",{attrs:{color:"#4471c5"}},[t._v("直接依赖 ")]),t._v("：在项目中直接导入的依赖，就是直接依赖")],1),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("implementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.apache.logging.log4j:log4j:2.17.2'")]),t._v("\n")])])]),n("p",[t._v("上面是简写法，完整版是：")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("implementation group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.apache.logging.log4j'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'log4j'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" version"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2.17.2'")]),t._v("\n")])])]),n("p",[t._v("group/name/version 共同定位一个远程仓库，version 最好写一个固定的版本号，以防构建出问题，implementation 类似 maven 中的依赖的 scope，对比 maven 中的依赖：")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("log4j"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("log4j"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.2.12"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("compile"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("scope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencies")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[n("font",{attrs:{color:"#4471c5"}},[t._v("项目依赖")]),t._v("：从项目的某个模块依赖另一个模块")],1),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("implementation "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("project")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("':subject01'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("这种依赖方式是直接依赖本工程中的 libary module，这个 libary module 需要在 setting.gradle 中配置。")]),t._v(" "),n("p",[n("font",{attrs:{color:"#4471c5"}},[t._v("本地 jar 依赖")]),t._v("：本地 jar 文件依赖，一般包含以下两种方式")],1),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//直接依赖某文件")]),t._v("\nimplementation "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("files")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'libs/foo.jar'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'libs/bar.jar'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//配置某文件夹作为依赖项")]),t._v("\nimplementation "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileTree")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'libs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" include"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.jar'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"依赖的下载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖的下载"}},[t._v("#")]),t._v(" 依赖的下载")]),t._v(" "),n("p",[t._v("当执行 build 命令时，gradle 就会去配置的依赖仓库中下载对应的 Jar，并应用到项目中。")]),t._v(" "),n("h2",{attrs:{id:"依赖的类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖的类型"}},[t._v("#")]),t._v(" 依赖的类型")]),t._v(" "),n("p",[t._v("类似于 Maven 的 scope 标签，gradle 也提供了依赖的类型，具体如下所示：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("说明")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("compileOnly")]),t._v(" "),n("td",[t._v("由java插件提供，曾短暂的叫provided，后续版本已经改成了compileOnly，适用于编译期需要而不需要打包的情况")])]),t._v(" "),n("tr",[n("td",[t._v("runtimeOnly")]),t._v(" "),n("td",[t._v("由 java 插件提供，只在运行期有效，编译时不需要，比如 mysql 驱动包。取代老版本中被移除的 runtime")])]),t._v(" "),n("tr",[n("td",[t._v("implementation")]),t._v(" "),n("td",[t._v("由 java 插件提供，针对源码[src/main 目录]，在编译、运行时都有效，取代老版本中被移除的 compile")])]),t._v(" "),n("tr",[n("td",[t._v("testCompileOnly")]),t._v(" "),n("td",[t._v("由 java 插件提供，用于编译测试的依赖项，运行时不需要")])]),t._v(" "),n("tr",[n("td",[t._v("testRuntimeOnly")]),t._v(" "),n("td",[t._v("由 java 插件提供，只在测试运行时需要，而不是在测试编译时需要，取代老版本中被移除的 testRuntime")])]),t._v(" "),n("tr",[n("td",[t._v("testImplementation")]),t._v(" "),n("td",[t._v("由 java 插件提供，针对测试代码[src/test 目录] 取代老版本中被移除的 testCompile")])]),t._v(" "),n("tr",[n("td",[t._v("providedCompile")]),t._v(" "),n("td",[t._v("war 插件提供支持，编译、测试阶段代码需要依赖此类 jar 包，而运行阶段容器已经提供了相应的支持，所 以无需将这些文件打入到 war 包中了;例如 servlet-api.jar、jsp-api.jar")])]),t._v(" "),n("tr",[n("td",[t._v("compile")]),t._v(" "),n("td",[t._v("编译范围依赖在所有的 classpath 中可用，同时它们也会被打包。在 gradle 7.0 已经移除")])]),t._v(" "),n("tr",[n("td",[t._v("runtime")]),t._v(" "),n("td",[t._v("runtime 依赖在运行和测试系统的时候需要，在编译的时候不需要，比如 mysql 驱动包。在 gradle 7.0 已经移除")])]),t._v(" "),n("tr",[n("td",[t._v("api")]),t._v(" "),n("td",[t._v("java-library 插件提供支持，这些依赖项可以传递性地导出给使用者，用于编译时和运行时。取代老版本中被 移除的 compile")])]),t._v(" "),n("tr",[n("td",[t._v("compileOnlyApi")]),t._v(" "),n("td",[t._v("java-library 插件提供支持，在声明模块和使用者在编译时需要的依赖项，但在运行时不需要。")])])])]),t._v(" "),n("p",[n("font",{attrs:{color:"#ff0000"}},[n("strong",[t._v("官方文档参考")])]),t._v("：")],1),t._v(" "),n("p",[n("a",{attrs:{href:"https://docs.gradle.org/current/userguide/java_library_plugin.html#java_library_plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Java Library Plugin (gradle.org)"),n("OutboundLink")],1),t._v("：各个依赖范围的关系和说明\n"),n("a",{attrs:{href:"https://docs.gradle.org/current/userguide/upgrading_version_6.html#sec:configuration_removal",target:"_blank",rel:"noopener noreferrer"}},[t._v("Upgrading your build from Gradle 6.x to the latest"),n("OutboundLink")],1),t._v("：依赖范围升级和移除\n"),n("a",{attrs:{href:"https://docs.gradle.org/current/userguide/java_library_plugin.html#java_library_plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Java Library Plugin (gradle.org)"),n("OutboundLink")],1),t._v("：API 和 implemention 区别\n"),n("a",{attrs:{href:"https://docs.gradle.org/current/userguide/java_plugin.html#java_plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Java Plugin (gradle.org)"),n("OutboundLink")],1),t._v("：执行 java 命令时都使用了哪些依赖范围的依赖")]),t._v(" "),n("blockquote",[n("p",[t._v("java 插件提供的功能，java-library 插件都提供。")])]),t._v(" "),n("h2",{attrs:{id:"api-与-implementation-区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#api-与-implementation-区别"}},[t._v("#")]),t._v(" api 与 implementation 区别")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}}),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("api")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("implementation")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("编译时")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("能进行依赖传递，底层变，全部都需要改变。编译速度慢")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("不能进行依赖传递，底层变，不用全部都要变。编译速度快")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("运行时")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("运行时会进行加载，所有模块的 Class 都要被加载")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("运行时会进行加载，所有模块的 Class 都要被加载")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("应用场景")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("适用于多模块依赖，避免重复依赖模块")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("多数情况下使用 implementation")])])])]),t._v(" "),n("p",[t._v("如下图：")]),t._v(" "),n("p",[n("img",{attrs:{src:s(780),alt:""}})]),t._v(" "),n("p",[n("font",{attrs:{color:"#ff0000"}},[t._v("编译时")]),t._v("：如果 libC 的内容发生变化,由于使用的是 api 依赖，依赖会传递，所以 libC、libA、projectX 都要发生变化，都需要重新编译，速度慢，运行时：libC、libA、projectX 中的 class 都要被加载。")],1),t._v(" "),n("p",[n("font",{attrs:{color:"#ff0000"}},[t._v("编译时")]),t._v("：如果 libD 的内容发生变化，由于使用的是 implemetation 依赖，依赖不会传递，只有 libD、libB 要变化并重新编译，速度快。")],1),t._v(" "),n("p",[n("font",{attrs:{color:"#ff0000"}},[t._v("运行时")]),t._v("：libC、libA、projectX 中的 class 都要被加载。")],1),t._v(" "),n("blockquote",[n("p",[t._v("api 和 implementation 案例分析")]),t._v(" "),n("p",[t._v("api 的适用场景是多 module 依赖，moduleA 工程依赖了 module B，同时 module B 又需要依赖了 module C，modelA 工程也需要去依赖 module C，这个时候避免重复依赖 module，可以使用 module B api 依赖的方式去依赖 module C，modelA 工程只需要依赖 moduleB 即可。")])]),t._v(" "),n("p",[t._v("有ABCD四个模块：")]),t._v(" "),n("ul",[n("li",[t._v("A implementation B，B implementation C，则 A 不能使用 C 。")]),t._v(" "),n("li",[t._v("A implementation B，B api C，则 A 能使用 C 。")]),t._v(" "),n("li",[t._v("A implementation B，B implementation C，C api D， 则 B 可以使用 D，A 不可以使用 D。")]),t._v(" "),n("li",[t._v("A implementation B，B api C，C api D，A 可以使用 D。")]),t._v(" "),n("li",[t._v("不管 ABCD 在何处被添加到类路径都一样，在运行时这些模块中的 class 都是要被加载的。")])]),t._v(" "),n("p",[t._v("总之，除非涉及到"),n("strong",[t._v("多模块依赖")]),t._v("，为了"),n("strong",[t._v("避免重复依赖")]),t._v("，使用 api，其它情况优先选择 implementation，拥有大量的 api 依赖项会显著增加构建时间。")]),t._v(" "),n("h2",{attrs:{id:"依赖冲突及解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖冲突及解决方案"}},[t._v("#")]),t._v(" 依赖冲突及解决方案")]),t._v(" "),n("p",[t._v("依赖冲突是指"),n("code",[t._v("在编译过程中, 如果存在某个依赖的多个版本, 构建系统应该选择哪个进行构建的问题")]),t._v("，如下所示：")]),t._v(" "),n("p",[n("img",{attrs:{src:s(781),alt:""}})]),t._v(" "),n("p",[t._v("A、B、C 都是本地子项目 module，log4j 是远程依赖。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("编译时：B 用 1.4.2 版本的 log4j，C 用 2.2.4 版本的 log4j，B 和 C 之间没有冲突\n打包时：只能有一个版本的代码最终打包进最终的A对应的jar|war包，对于 Gradle 来说这里就有冲突了\n")])])]),n("p",[t._v("案例演示：我们在 build.gradle 引入依赖库")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    testImplementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.junit.jupiter:junit-jupiter-api:5.8.1'")]),t._v("\n    testRuntimeOnly "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.junit.jupiter:junit-jupiter-engine:5.8.1'")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.hibernate:hibernate-core:3.6.3.Final'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:s(782),alt:""}})]),t._v(" "),n("p",[t._v("修改 build.gradle")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    testImplementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.junit.jupiter:junit-jupiter-api:5.8.1'")]),t._v("\n    testRuntimeOnly "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.junit.jupiter:junit-jupiter-engine:5.8.1'")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.hibernate:hibernate-core:3.6.3.Final'")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.slf4j:slf4j-api:1.4.0'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:s(783),alt:""}})]),t._v(" "),n("p",[t._v("如上所示："),n("font",{attrs:{color:"#698dcf"}},[t._v("默认下，Gradle 会使用最新版本的 jar 包")]),t._v("【考虑到新版本的 jar 包一般都是向下兼容的】，实际开发中，还是建议使用官方自带的这种解决方案。当然除此之外，Gradle 也为我们提供了一系列的解决依赖冲突的方法: exclude 移除一个依赖，不允许依赖传递，强制使用某个版本。")],1),t._v(" "),n("p",[n("font",{attrs:{color:"red"}},[n("strong",[t._v("Exclude 排除某个依赖")])])],1),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    testImplementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.junit.jupiter:junit-jupiter-api:5.8.1'")]),t._v("\n    testRuntimeOnly "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.junit.jupiter:junit-jupiter-engine:5.8.1'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("implementation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.hibernate:hibernate-core:3.6.3.Final'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//排除某一个库(slf4j)依赖:如下三种写法都行")]),t._v("\n        exclude group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.slf4j'")]),t._v("\n        exclude module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'slf4j-api'")]),t._v("\n        exclude group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.slf4j'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'slf4j-api'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//排除之后,使用手动的引入即可。")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.slf4j:slf4j-api:1.4.0'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("font",{attrs:{color:"red"}},[n("strong",[t._v("不允许依赖传递")])])],1),t._v(" "),n("p",[t._v("在添加依赖项时,如果设置 transitive 为 false，表示关闭依赖传递。"),n("font",{attrs:{color:"red"}},[t._v("即内部的所有依赖将不会添加到编译和运行时的类路径")]),t._v("。")],1),t._v(" "),n("p",[n("font",{attrs:{color:"red"}},[n("strong",[t._v("强制使用某个版本")])])],1),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    testImplementation "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.junit.jupiter:junit-jupiter-api:5.8.1'")]),t._v("\n    testRuntimeOnly "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.junit.jupiter:junit-jupiter-engine:5.8.1'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("implementation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.hibernate:hibernate-core:3.6.3.Final'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//强制使用某个版本!!【官方建议使用这种方式】")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("implementation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.slf4j:slf4j-api:1.4.0!!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这种效果和上面那种一样,强制指定某个版本")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("implementation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.slf4j:slf4j-api:1.4.0'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("strictly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"1.4.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),n("p",[n("font",{attrs:{color:"red"}},[t._v("拓展")]),t._v("：我们可以先查看当前项目中到底有哪些依赖冲突")],1),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//下面我们配置，当 Gradle 构建遇到依赖冲突时，就立即构建失败")]),t._v("\nconfigurations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Configuration configuration "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//当遇到版本冲突时直接构建失败")]),t._v("\n        configuration"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resolutionStrategy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("failOnVersionConflict")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports},780:function(t,a,s){t.exports=s.p+"assets/img/Snipaste_2022-09-26_10-49-35.68977c8d.png"},781:function(t,a,s){t.exports=s.p+"assets/img/Snipaste_2022-09-26_11-12-54.f87cf68c.png"},782:function(t,a,s){t.exports=s.p+"assets/img/Snipaste_2022-09-27_10-33-25.e52c8915.png"},783:function(t,a){t.exports="data:image/png;base64,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"}}]);